"use strict";(self.webpackChunkblog_road=self.webpackChunkblog_road||[]).push([[1286],{66262:(e,t)=>{t.A=(e,t)=>{const a=e.__vccOpts||e;for(const[e,l]of t)a[e]=l;return a}},81316:(e,t,a)=>{a.r(t),a.d(t,{comp:()=>r,data:()=>o});var l=a(20641);const i=[(0,l.Fv)('<h1 id="因素06-用简单api实现启动暂停恢复" tabindex="-1"><a class="header-anchor" href="#因素06-用简单api实现启动暂停恢复"><span>因素06：用简单API实现启动暂停恢复</span></a></h1><blockquote><p>来源：12-Factor Agents / Factor 6（Launch/Pause/Resume with simple APIs）</p></blockquote><h2 id="一句话先懂" tabindex="-1"><a class="header-anchor" href="#一句话先懂"><span>一句话先懂</span></a></h2><p>智能体要像标准任务系统一样可管理：启动、查询、暂停、恢复都要有清晰 API。</p><h2 id="奶奶版理解" tabindex="-1"><a class="header-anchor" href="#奶奶版理解"><span>奶奶版理解</span></a></h2><p>炖汤不是必须一直守着火。你可以：</p><ul><li>先开火</li><li>中途关火</li><li>晚上继续炖</li></ul><p>智能体也应支持这样“可中断、可续跑”的节奏。</p><h2 id="原文关注点" tabindex="-1"><a class="header-anchor" href="#原文关注点"><span>原文关注点</span></a></h2><ul><li>不要把 agent 绑定在一次长请求里。</li><li>遇到长耗时或人工等待，应能优雅暂停。</li><li>外部 webhook 到来后，应能按 thread 恢复执行。</li></ul><h2 id="推荐最小-api-设计" tabindex="-1"><a class="header-anchor" href="#推荐最小-api-设计"><span>推荐最小 API 设计</span></a></h2><ul><li><code>POST /agent-runs</code>：创建并启动任务</li><li><code>GET /agent-runs/{id}</code>：查询状态与最近事件</li><li><code>POST /agent-runs/{id}/pause</code>：主动暂停</li><li><code>POST /agent-runs/{id}/resume</code>：附带新事件恢复</li></ul><h2 id="状态机建议" tabindex="-1"><a class="header-anchor" href="#状态机建议"><span>状态机建议</span></a></h2><p><code>queued -&gt; running -&gt; waiting_external -&gt; resumed -&gt; completed/failed</code></p><p>每次迁移都记录事件，保证可追踪。</p><h2 id="典型流程" tabindex="-1"><a class="header-anchor" href="#典型流程"><span>典型流程</span></a></h2><ol><li>用户触发发布任务</li><li>模型请求人工审批</li><li>系统落库并进入 <code>waiting_external</code></li><li>审批 webhook 到达</li><li>追加 <code>human_response</code> 事件并 resume</li></ol><h2 id="常见误区" tabindex="-1"><a class="header-anchor" href="#常见误区"><span>常见误区</span></a></h2><ul><li>回调接口无幂等，重复触发重复执行。</li><li>只支持“整体暂停”，不支持关键步骤前暂停。</li><li>查询接口只返回文本，不返回结构化状态和事件。</li></ul><h2 id="我的思考" tabindex="-1"><a class="header-anchor" href="#我的思考"><span>我的思考</span></a></h2><p>这条对“从 Demo 到生产”特别关键。<br> 因为生产系统不可能永远在线、永远顺利、永远无等待。</p><p>有 pause/resume 之后，agent 才能真正接进现有业务链路（审批、工单、消息系统）。</p><h2 id="小结" tabindex="-1"><a class="header-anchor" href="#小结"><span>小结</span></a></h2><ul><li>Agent 不是一次性对话，而是长期任务。</li><li>生命周期 API 简单清晰，比花哨功能更重要。</li><li>可恢复能力是生产级智能体底座。</li></ul>',24)],n={},r=(0,a(66262).A)(n,[["render",function(e,t){return(0,l.uX)(),(0,l.CE)("div",null,i)}]]),o=JSON.parse('{"path":"/%E5%A5%B6%E5%A5%B6%E5%85%AB%E8%82%A1/12%E5%9B%A0%E7%B4%A0%E6%99%BA%E8%83%BD%E4%BD%93/06-%E7%94%A8%E7%AE%80%E5%8D%95API%E5%AE%9E%E7%8E%B0%E5%90%AF%E5%8A%A8%E6%9A%82%E5%81%9C%E6%81%A2%E5%A4%8D.html","title":"因素06：用简单API实现启动暂停恢复","lang":"zh-CN","frontmatter":{"icon":"pen-to-square","date":"2026-02-13T00:00:00.000Z","category":["后端"],"tag":["12因素智能体","大模型","Factor-06"],"description":"因素06：用简单API实现启动暂停恢复 来源：12-Factor Agents / Factor 6（Launch/Pause/Resume with simple APIs） 一句话先懂 智能体要像标准任务系统一样可管理：启动、查询、暂停、恢复都要有清晰 API。 奶奶版理解 炖汤不是必须一直守着火。你可以： 先开火 中途关火 晚上继续炖 智能体也应...","head":[["meta",{"property":"og:url","content":"https://xlb3055.github.io/newBlog/%E5%A5%B6%E5%A5%B6%E5%85%AB%E8%82%A1/12%E5%9B%A0%E7%B4%A0%E6%99%BA%E8%83%BD%E4%BD%93/06-%E7%94%A8%E7%AE%80%E5%8D%95API%E5%AE%9E%E7%8E%B0%E5%90%AF%E5%8A%A8%E6%9A%82%E5%81%9C%E6%81%A2%E5%A4%8D.html"}],["meta",{"property":"og:site_name","content":"Bin的技术博客"}],["meta",{"property":"og:title","content":"因素06：用简单API实现启动暂停恢复"}],["meta",{"property":"og:description","content":"因素06：用简单API实现启动暂停恢复 来源：12-Factor Agents / Factor 6（Launch/Pause/Resume with simple APIs） 一句话先懂 智能体要像标准任务系统一样可管理：启动、查询、暂停、恢复都要有清晰 API。 奶奶版理解 炖汤不是必须一直守着火。你可以： 先开火 中途关火 晚上继续炖 智能体也应..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2026-02-13T07:34:00.000Z"}],["meta",{"property":"article:author","content":"Bin"}],["meta",{"property":"article:tag","content":"12因素智能体"}],["meta",{"property":"article:tag","content":"大模型"}],["meta",{"property":"article:tag","content":"Factor-06"}],["meta",{"property":"article:published_time","content":"2026-02-13T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2026-02-13T07:34:00.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"因素06：用简单API实现启动暂停恢复\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2026-02-13T00:00:00.000Z\\",\\"dateModified\\":\\"2026-02-13T07:34:00.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Bin\\",\\"url\\":\\"/avator_img.jpg\\"}]}"]]},"headers":[{"level":2,"title":"一句话先懂","slug":"一句话先懂","link":"#一句话先懂","children":[]},{"level":2,"title":"奶奶版理解","slug":"奶奶版理解","link":"#奶奶版理解","children":[]},{"level":2,"title":"原文关注点","slug":"原文关注点","link":"#原文关注点","children":[]},{"level":2,"title":"推荐最小 API 设计","slug":"推荐最小-api-设计","link":"#推荐最小-api-设计","children":[]},{"level":2,"title":"状态机建议","slug":"状态机建议","link":"#状态机建议","children":[]},{"level":2,"title":"典型流程","slug":"典型流程","link":"#典型流程","children":[]},{"level":2,"title":"常见误区","slug":"常见误区","link":"#常见误区","children":[]},{"level":2,"title":"我的思考","slug":"我的思考","link":"#我的思考","children":[]},{"level":2,"title":"小结","slug":"小结","link":"#小结","children":[]}],"git":{"createdTime":1770968040000,"updatedTime":1770968040000,"contributors":[{"name":"bin","email":"13598151+binxlb@user.noreply.gitee.com","commits":1}]},"readingTime":{"minutes":1.56,"words":468},"filePathRelative":"奶奶八股/12因素智能体/06-用简单API实现启动暂停恢复.md","localizedDate":"2026年2月13日","excerpt":"\\n<blockquote>\\n<p>来源：12-Factor Agents / Factor 6（Launch/Pause/Resume with simple APIs）</p>\\n</blockquote>\\n<h2>一句话先懂</h2>\\n<p>智能体要像标准任务系统一样可管理：启动、查询、暂停、恢复都要有清晰 API。</p>\\n<h2>奶奶版理解</h2>\\n<p>炖汤不是必须一直守着火。你可以：</p>\\n<ul>\\n<li>先开火</li>\\n<li>中途关火</li>\\n<li>晚上继续炖</li>\\n</ul>\\n<p>智能体也应支持这样“可中断、可续跑”的节奏。</p>\\n<h2>原文关注点</h2>","autoDesc":true}')}}]);