"use strict";(self.webpackChunkblog_road=self.webpackChunkblog_road||[]).push([[4201],{66262:(s,n)=>{n.A=(s,n)=>{const a=s.__vccOpts||s;for(const[s,e]of n)a[s]=e;return a}},74236:(s,n,a)=>{a.r(n),a.d(n,{comp:()=>c,data:()=>r});var e=a(20641);const i=(0,e.Fv)('<h1 id="进程写文件时-进程发生了崩溃-已写入的数据会丢失吗" tabindex="-1"><a class="header-anchor" href="#进程写文件时-进程发生了崩溃-已写入的数据会丢失吗"><span>进程写文件时，进程发生了崩溃，已写入的数据会丢失吗？</span></a></h1><h2 id="page-cache-完整教程-奶奶都能懂版" tabindex="-1"><a class="header-anchor" href="#page-cache-完整教程-奶奶都能懂版"><span>Page Cache 完整教程 - 奶奶都能懂版</span></a></h2><h3 id="第一章-什么是-page-cache-就像家里的临时储物间" tabindex="-1"><a class="header-anchor" href="#第一章-什么是-page-cache-就像家里的临时储物间"><span>第一章：什么是 Page Cache？（就像家里的临时储物间）</span></a></h3><h4 id="_1-1-page-cache-是什么" tabindex="-1"><a class="header-anchor" href="#_1-1-page-cache-是什么"><span>1.1 Page Cache 是什么？</span></a></h4><p>根据<a href="https://xiaolincoding.com/os/6_file_system/pagecache.html#page-cache-%E4%B8%8E-buffer-cache" target="_blank" rel="noopener noreferrer">小林coding的文章</a>，Page Cache就像您家里的<strong>临时储物间</strong>：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>Page Cache = 临时储物间</span></span>\n<span class="line"><span>├── 存放经常使用的文件</span></span>\n<span class="line"><span>├── 比去仓库（磁盘）取东西快很多</span></span>\n<span class="line"><span>├── 可以预先把可能需要的东西准备好</span></span>\n<span class="line"><span>└── 当储物间满了，会把不常用的东西放回仓库</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>生活例子</strong>：就像您把经常用的东西放在客厅的储物间，而不是每次都去地下室拿，这样取东西就快多了。</p><h4 id="_1-2-page-cache在系统中的位置" tabindex="-1"><a class="header-anchor" href="#_1-2-page-cache在系统中的位置"><span>1.2 Page Cache在系统中的位置</span></a></h4><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>文件I/O系统结构：</span></span>\n<span class="line"><span>┌─────────────────────────────────┐</span></span>\n<span class="line"><span>│        应用程序                 │</span></span>\n<span class="line"><span>└─────────────────────────────────┘</span></span>\n<span class="line"><span>              │</span></span>\n<span class="line"><span>              ▼</span></span>\n<span class="line"><span>┌─────────────────────────────────┐</span></span>\n<span class="line"><span>│        系统调用                 │</span></span>\n<span class="line"><span>└─────────────────────────────────┘</span></span>\n<span class="line"><span>              │</span></span>\n<span class="line"><span>              ▼</span></span>\n<span class="line"><span>┌─────────────────────────────────┐</span></span>\n<span class="line"><span>│        Page Cache               │ ← 红色部分，就是临时储物间</span></span>\n<span class="line"><span>└─────────────────────────────────┘</span></span>\n<span class="line"><span>              │</span></span>\n<span class="line"><span>              ▼</span></span>\n<span class="line"><span>┌─────────────────────────────────┐</span></span>\n<span class="line"><span>│         磁盘                    │</span></span>\n<span class="line"><span>└─────────────────────────────────┘</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>生活例子</strong>：就像您从客厅（应用程序）到储物间（Page Cache）再到地下室（磁盘）的路径。</p><h3 id="第二章-如何查看-page-cache-就像查看储物间使用情况" tabindex="-1"><a class="header-anchor" href="#第二章-如何查看-page-cache-就像查看储物间使用情况"><span>第二章：如何查看 Page Cache？（就像查看储物间使用情况）</span></a></h3><h4 id="_2-1-查看系统内存情况" tabindex="-1"><a class="header-anchor" href="#_2-1-查看系统内存情况"><span>2.1 查看系统内存情况</span></a></h4><p>通过查看<code>/proc/meminfo</code>文件，就像查看储物间的使用情况：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>$ cat /proc/meminfo</span></span>\n<span class="line"><span>...</span></span>\n<span class="line"><span>Buffers:            1224 kB      ← 缓冲区大小</span></span>\n<span class="line"><span>Cached:           111472 kB      ← 缓存大小</span></span>\n<span class="line"><span>SwapCached:        36364 kB      ← 交换缓存大小</span></span>\n<span class="line"><span>Active:          6224232 kB      ← 活跃内存</span></span>\n<span class="line"><span>Inactive:         979432 kB      ← 非活跃内存</span></span>\n<span class="line"><span>Active(anon):    6173036 kB      ← 活跃匿名页</span></span>\n<span class="line"><span>Inactive(anon):   927932 kB      ← 非活跃匿名页</span></span>\n<span class="line"><span>Active(file):      51196 kB      ← 活跃文件页</span></span>\n<span class="line"><span>Inactive(file):    51500 kB      ← 非活跃文件页</span></span>\n<span class="line"><span>...</span></span>\n<span class="line"><span>Shmem:             10000 kB      ← 共享内存</span></span>\n<span class="line"><span>...</span></span>\n<span class="line"><span>SReclaimable:      43532 kB      ← 可回收内存</span></span>\n<span class="line"><span>...</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>生活例子</strong>：就像查看储物间的详细清单，知道哪些东西在哪个区域，占用了多少空间。</p><h4 id="_2-2-page-cache的计算公式" tabindex="-1"><a class="header-anchor" href="#_2-2-page-cache的计算公式"><span>2.2 Page Cache的计算公式</span></a></h4><p>根据文章内容，Page Cache的计算公式是：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>Page Cache = Buffers + Cached + SwapCached</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>生活例子</strong>：就像储物间的总容量 = 主储物间 + 备用储物间 + 临时储物间。</p><h3 id="第三章-page-与-page-cache-的关系-就像物品与储物间" tabindex="-1"><a class="header-anchor" href="#第三章-page-与-page-cache-的关系-就像物品与储物间"><span>第三章：Page 与 Page Cache 的关系（就像物品与储物间）</span></a></h3><h4 id="_3-1-page-是什么" tabindex="-1"><a class="header-anchor" href="#_3-1-page-是什么"><span>3.1 Page 是什么？</span></a></h4><p>Page就像储物间里的<strong>标准储物盒</strong>：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>Page的特点：</span></span>\n<span class="line"><span>┌─────────────────────────────────┐</span></span>\n<span class="line"><span>│        标准储物盒（Page）        │</span></span>\n<span class="line"><span>│  ┌─────────────────────────────┐ │</span></span>\n<span class="line"><span>│  │ 大小：4KB（固定大小）        │ │</span></span>\n<span class="line"><span>│  │ 用途：存放文件数据           │ │</span></span>\n<span class="line"><span>│  │ 管理：操作系统统一管理       │ │</span></span>\n<span class="line"><span>│  └─────────────────────────────┘ │</span></span>\n<span class="line"><span>└─────────────────────────────────┘</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>生活例子</strong>：就像储物间里的标准储物盒，每个盒子大小一样，方便管理和存放。</p><h4 id="_3-2-两种类型的page" tabindex="-1"><a class="header-anchor" href="#_3-2-两种类型的page"><span>3.2 两种类型的Page</span></a></h4><p>根据文章内容，有两种类型的Page：</p><p><strong>1. File-backed pages（文件备份页）</strong></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>文件备份页：</span></span>\n<span class="line"><span>┌─────────────────────────────────┐</span></span>\n<span class="line"><span>│        文件备份页               │</span></span>\n<span class="line"><span>│  ┌─────────────────────────────┐ │</span></span>\n<span class="line"><span>│  │ 对应磁盘上的数据块           │ │</span></span>\n<span class="line"><span>│  │ 最大的问题：脏页回盘         │ │</span></span>\n<span class="line"><span>│  │ 例子：文档、图片、视频       │ │</span></span>\n<span class="line"><span>│  └─────────────────────────────┘ │</span></span>\n<span class="line"><span>└─────────────────────────────────┘</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>2. Anonymous pages（匿名页）</strong></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>匿名页：</span></span>\n<span class="line"><span>┌─────────────────────────────────┐</span></span>\n<span class="line"><span>│        匿名页                   │</span></span>\n<span class="line"><span>│  ┌─────────────────────────────┐ │</span></span>\n<span class="line"><span>│  │ 不对应磁盘上的数据块         │ │</span></span>\n<span class="line"><span>│  │ 例子：程序运行时的内存       │ │</span></span>\n<span class="line"><span>│  │ 包括：方法栈、局部变量表     │ │</span></span>\n<span class="line"><span>│  └─────────────────────────────┘ │</span></span>\n<span class="line"><span>└─────────────────────────────────┘</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>生活例子</strong>：</p><ul><li>文件备份页：就像储物间里存放的从仓库拿来的东西</li><li>匿名页：就像储物间里临时存放的正在使用的东西</li></ul><h3 id="第四章-为什么叫-page-cache-而不是-block-cache" tabindex="-1"><a class="header-anchor" href="#第四章-为什么叫-page-cache-而不是-block-cache"><span>第四章：为什么叫 Page Cache 而不是 Block Cache？</span></a></h3><h4 id="_4-1-历史原因" tabindex="-1"><a class="header-anchor" href="#_4-1-历史原因"><span>4.1 历史原因</span></a></h4><p>根据文章内容，这是因为：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>历史发展：</span></span>\n<span class="line"><span>┌─────────────────────────────────┐</span></span>\n<span class="line"><span>│        历史发展过程              │</span></span>\n<span class="line"><span>│  ┌─────────────────────────────┐ │</span></span>\n<span class="line"><span>│  │ 早期：按块（Block）管理      │ │</span></span>\n<span class="line"><span>│  │ 后来：按页（Page）管理       │ │</span></span>\n<span class="line"><span>│  │ 现在：统一使用Page Cache     │ │</span></span>\n<span class="line"><span>│  └─────────────────────────────┘ │</span></span>\n<span class="line"><span>└─────────────────────────────────┘</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>生活例子</strong>：就像早期用大箱子装东西，后来改用标准储物盒，现在统一用标准储物盒，但名字还是叫&quot;储物间&quot;。</p><h3 id="第五章-page-cache-与-buffer-cache-的关系" tabindex="-1"><a class="header-anchor" href="#第五章-page-cache-与-buffer-cache-的关系"><span>第五章：Page Cache 与 Buffer Cache 的关系</span></a></h3><h4 id="_5-1-什么是buffer-cache" tabindex="-1"><a class="header-anchor" href="#_5-1-什么是buffer-cache"><span>5.1 什么是Buffer Cache？</span></a></h4><p>Buffer Cache就像<strong>临时中转站</strong>：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>Buffer Cache的作用：</span></span>\n<span class="line"><span>┌─────────────────────────────────┐</span></span>\n<span class="line"><span>│        临时中转站                │</span></span>\n<span class="line"><span>│  ┌─────────────────────────────┐ │</span></span>\n<span class="line"><span>│  │ 存放块设备的数据             │ │</span></span>\n<span class="line"><span>│  │ 用于磁盘I/O操作             │ │</span></span>\n<span class="line"><span>│  │ 提高磁盘访问效率             │ │</span></span>\n<span class="line"><span>│  └─────────────────────────────┘ │</span></span>\n<span class="line"><span>└─────────────────────────────────┘</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>生活例子</strong>：就像快递的中转站，临时存放包裹，提高配送效率。</p><h4 id="_5-2-page-cache与buffer-cache的区别" tabindex="-1"><a class="header-anchor" href="#_5-2-page-cache与buffer-cache的区别"><span>5.2 Page Cache与Buffer Cache的区别</span></a></h4><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>Page Cache vs Buffer Cache：</span></span>\n<span class="line"><span>┌─────────────────────────────────┐</span></span>\n<span class="line"><span>│        Page Cache               │</span></span>\n<span class="line"><span>│  ┌─────────────────────────────┐ │</span></span>\n<span class="line"><span>│  │ 管理文件数据                 │ │</span></span>\n<span class="line"><span>│  │ 按页（4KB）管理             │ │</span></span>\n<span class="line"><span>│  │ 用于文件系统                 │ │</span></span>\n<span class="line"><span>│  └─────────────────────────────┘ │</span></span>\n<span class="line"><span>└─────────────────────────────────┘</span></span>\n<span class="line"><span>              │</span></span>\n<span class="line"><span>              ▼</span></span>\n<span class="line"><span>┌─────────────────────────────────┐</span></span>\n<span class="line"><span>│        Buffer Cache             │</span></span>\n<span class="line"><span>│  ┌─────────────────────────────┐ │</span></span>\n<span class="line"><span>│  │ 管理块设备数据               │ │</span></span>\n<span class="line"><span>│  │ 按块（512B-4KB）管理        │ │</span></span>\n<span class="line"><span>│  │ 用于磁盘I/O                 │ │</span></span>\n<span class="line"><span>│  └─────────────────────────────┘ │</span></span>\n<span class="line"><span>└─────────────────────────────────┘</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>生活例子</strong>：</p><ul><li>Page Cache：就像文件柜，按页管理文件</li><li>Buffer Cache：就像工具箱，按块管理工具</li></ul><h3 id="第六章-page-cache-与预读-就像提前准备" tabindex="-1"><a class="header-anchor" href="#第六章-page-cache-与预读-就像提前准备"><span>第六章：Page Cache 与预读（就像提前准备）</span></a></h3><h4 id="_6-1-什么是预读" tabindex="-1"><a class="header-anchor" href="#_6-1-什么是预读"><span>6.1 什么是预读？</span></a></h4><p>预读就像<strong>提前准备</strong>：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>预读机制：</span></span>\n<span class="line"><span>┌─────────────────────────────────┐</span></span>\n<span class="line"><span>│        预读机制                 │</span></span>\n<span class="line"><span>│  ┌─────────────────────────────┐ │</span></span>\n<span class="line"><span>│  │ 当您读取文件时               │ │</span></span>\n<span class="line"><span>│  │ 系统会预测您可能需要的数据   │ │</span></span>\n<span class="line"><span>│  │ 提前从磁盘读取到Page Cache   │ │</span></span>\n<span class="line"><span>│  │ 提高后续访问速度             │ │</span></span>\n<span class="line"><span>│  └─────────────────────────────┘ │</span></span>\n<span class="line"><span>└─────────────────────────────────┘</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>生活例子</strong>：就像您要看书，图书管理员不仅给您要的那本书，还提前准备了相关的参考书。</p><h4 id="_6-2-预读的工作原理" tabindex="-1"><a class="header-anchor" href="#_6-2-预读的工作原理"><span>6.2 预读的工作原理</span></a></h4><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>预读工作流程：</span></span>\n<span class="line"><span>1. 应用程序请求读取文件</span></span>\n<span class="line"><span>2. 系统从磁盘读取请求的数据</span></span>\n<span class="line"><span>3. 系统预测可能需要的相邻数据</span></span>\n<span class="line"><span>4. 提前读取相邻数据到Page Cache</span></span>\n<span class="line"><span>5. 应用程序下次访问时直接从Page Cache读取</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>生活例子</strong>：就像您要第5页的内容，图书管理员不仅给您第5页，还提前准备了第6、7、8页。</p><h3 id="第七章-数据持久化与一致性-就像保存重要文件" tabindex="-1"><a class="header-anchor" href="#第七章-数据持久化与一致性-就像保存重要文件"><span>第七章：数据持久化与一致性（就像保存重要文件）</span></a></h3><h4 id="_7-1-什么是数据持久化" tabindex="-1"><a class="header-anchor" href="#_7-1-什么是数据持久化"><span>7.1 什么是数据持久化？</span></a></h4><p>数据持久化就像<strong>保存重要文件</strong>：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>数据持久化：</span></span>\n<span class="line"><span>┌─────────────────────────────────┐</span></span>\n<span class="line"><span>│        数据持久化               │</span></span>\n<span class="line"><span>│  ┌─────────────────────────────┐ │</span></span>\n<span class="line"><span>│  │ 将Page Cache中的数据         │ │</span></span>\n<span class="line"><span>│  │ 写入到磁盘                   │ │</span></span>\n<span class="line"><span>│  │ 确保数据不会丢失             │ │</span></span>\n<span class="line"><span>│  └─────────────────────────────┘ │</span></span>\n<span class="line"><span>└─────────────────────────────────┘</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>生活例子</strong>：就像把重要的文件从临时文件夹复制到保险柜，确保不会丢失。</p><h4 id="_7-2-两种写入策略" tabindex="-1"><a class="header-anchor" href="#_7-2-两种写入策略"><span>7.2 两种写入策略</span></a></h4><p><strong>1. Write Through（写通）</strong></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>Write Through：</span></span>\n<span class="line"><span>应用程序 → Page Cache → 立即写入磁盘</span></span>\n<span class="line"><span>就像：您写文件 → 临时文件夹 → 立即保存到保险柜</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>2. Write Back（写回）</strong></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>Write Back：</span></span>\n<span class="line"><span>应用程序 → Page Cache → 延迟写入磁盘</span></span>\n<span class="line"><span>就像：您写文件 → 临时文件夹 → 稍后保存到保险柜</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>生活例子</strong>：</p><ul><li>Write Through：就像每写一个字就保存一次</li><li>Write Back：就像写完整篇文章再保存</li></ul><h4 id="_7-3-三种系统调用" tabindex="-1"><a class="header-anchor" href="#_7-3-三种系统调用"><span>7.3 三种系统调用</span></a></h4><p>根据文章内容，有三种系统调用：</p><p><strong>1. fsync() - 完全同步</strong></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>fsync(fd)：</span></span>\n<span class="line"><span>将文件的脏数据和脏元数据全部刷新至磁盘</span></span>\n<span class="line"><span>就像：把文件的所有内容都保存到保险柜</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>2. fdatasync() - 数据同步</strong></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>fdatasync(fd)：</span></span>\n<span class="line"><span>将文件的脏数据刷新至磁盘，必要的元数据也刷新</span></span>\n<span class="line"><span>就像：保存文件内容，但只保存必要的文件信息</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>3. sync() - 全局同步</strong></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>sync()：</span></span>\n<span class="line"><span>将系统中所有的脏数据刷新至磁盘</span></span>\n<span class="line"><span>就像：保存所有未保存的文件</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>生活例子</strong>：</p><ul><li>fsync：就像保存单个文件的完整信息</li><li>fdatasync：就像保存文件内容，但只保存必要信息</li><li>sync：就像保存所有未保存的文件</li></ul><h3 id="第八章-内核线程管理-就像管理员" tabindex="-1"><a class="header-anchor" href="#第八章-内核线程管理-就像管理员"><span>第八章：内核线程管理（就像管理员）</span></a></h3><h4 id="_8-1-内核线程的作用" tabindex="-1"><a class="header-anchor" href="#_8-1-内核线程的作用"><span>8.1 内核线程的作用</span></a></h4><p>内核线程就像<strong>储物间管理员</strong>：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>内核线程管理：</span></span>\n<span class="line"><span>┌─────────────────────────────────┐</span></span>\n<span class="line"><span>│        储物间管理员              │</span></span>\n<span class="line"><span>│  ┌─────────────────────────────┐ │</span></span>\n<span class="line"><span>│  │ 管理线程：监控脏页面情况     │ │</span></span>\n<span class="line"><span>│  │ 刷新线程：负责数据回写       │ │</span></span>\n<span class="line"><span>│  │ 每个存储设备一个刷新线程     │ │</span></span>\n<span class="line"><span>│  └─────────────────────────────┘ │</span></span>\n<span class="line"><span>└─────────────────────────────────┘</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>生活例子</strong>：就像储物间有管理员，负责监控哪些东西需要整理，哪些东西需要放回仓库。</p><h4 id="_8-2-多线程架构" tabindex="-1"><a class="header-anchor" href="#_8-2-多线程架构"><span>8.2 多线程架构</span></a></h4><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>多线程架构：</span></span>\n<span class="line"><span>┌─────────────────────────────────┐</span></span>\n<span class="line"><span>│        管理线程                 │</span></span>\n<span class="line"><span>│  ┌─────────────────────────────┐ │</span></span>\n<span class="line"><span>│  │ 监控设备上的脏页面情况       │ │</span></span>\n<span class="line"><span>│  │ 创建/销毁刷新线程           │ │</span></span>\n<span class="line"><span>│  └─────────────────────────────┘ │</span></span>\n<span class="line"><span>└─────────────────────────────────┘</span></span>\n<span class="line"><span>              │</span></span>\n<span class="line"><span>              ▼</span></span>\n<span class="line"><span>┌─────────────────────────────────┐</span></span>\n<span class="line"><span>│        刷新线程1                │</span></span>\n<span class="line"><span>│  ┌─────────────────────────────┐ │</span></span>\n<span class="line"><span>│  │ 负责设备1的脏页面回写       │ │</span></span>\n<span class="line"><span>│  └─────────────────────────────┘ │</span></span>\n<span class="line"><span>└─────────────────────────────────┘</span></span>\n<span class="line"><span>              │</span></span>\n<span class="line"><span>              ▼</span></span>\n<span class="line"><span>┌─────────────────────────────────┐</span></span>\n<span class="line"><span>│        刷新线程2                │</span></span>\n<span class="line"><span>│  ┌─────────────────────────────┐ │</span></span>\n<span class="line"><span>│  │ 负责设备2的脏页面回写       │ │</span></span>\n<span class="line"><span>│  └─────────────────────────────┘ │</span></span>\n<span class="line"><span>└─────────────────────────────────┘</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>生活例子</strong>：就像储物间有总管理员，下面有多个分管理员，每个分管理员负责不同的区域。</p><h3 id="第九章-page-cache-的优劣势-就像储物间的优缺点" tabindex="-1"><a class="header-anchor" href="#第九章-page-cache-的优劣势-就像储物间的优缺点"><span>第九章：Page Cache 的优劣势（就像储物间的优缺点）</span></a></h3><h4 id="_9-1-page-cache的优势" tabindex="-1"><a class="header-anchor" href="#_9-1-page-cache的优势"><span>9.1 Page Cache的优势</span></a></h4><p><strong>1. 加快数据访问</strong></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>优势1：加快数据访问</span></span>\n<span class="line"><span>┌─────────────────────────────────┐</span></span>\n<span class="line"><span>│        数据访问对比              │</span></span>\n<span class="line"><span>│  ┌─────────────────────────────┐ │</span></span>\n<span class="line"><span>│  │ 从Page Cache读取：1微秒      │ │</span></span>\n<span class="line"><span>│  │ 从磁盘读取：10毫秒           │ │</span></span>\n<span class="line"><span>│  │ 速度提升：10000倍            │ │</span></span>\n<span class="line"><span>│  └─────────────────────────────┘ │</span></span>\n<span class="line"><span>└─────────────────────────────────┘</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>生活例子</strong>：就像从客厅储物间拿东西比从地下室拿东西快10000倍。</p><p><strong>2. 减少I/O次数</strong></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>优势2：减少I/O次数</span></span>\n<span class="line"><span>┌─────────────────────────────────┐</span></span>\n<span class="line"><span>│        I/O次数对比              │</span></span>\n<span class="line"><span>│  ┌─────────────────────────────┐ │</span></span>\n<span class="line"><span>│  │ 没有Page Cache：每次都要     │ │</span></span>\n<span class="line"><span>│  │ 从磁盘读取                  │ │</span></span>\n<span class="line"><span>│  │ 有Page Cache：一次读取       │ │</span></span>\n<span class="line"><span>│  │ 多次使用                    │ │</span></span>\n<span class="line"><span>│  └─────────────────────────────┘ │</span></span>\n<span class="line"><span>└─────────────────────────────────┘</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>生活例子</strong>：就像没有储物间，每次都要去地下室拿东西；有了储物间，一次拿够，多次使用。</p><h4 id="_9-2-page-cache的劣势" tabindex="-1"><a class="header-anchor" href="#_9-2-page-cache的劣势"><span>9.2 Page Cache的劣势</span></a></h4><p><strong>1. 占用额外内存</strong></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>劣势1：占用额外内存</span></span>\n<span class="line"><span>┌─────────────────────────────────┐</span></span>\n<span class="line"><span>│        内存占用问题              │</span></span>\n<span class="line"><span>│  ┌─────────────────────────────┐ │</span></span>\n<span class="line"><span>│  │ Page Cache占用物理内存       │ │</span></span>\n<span class="line"><span>│  │ 可能导致频繁的swap操作       │ │</span></span>\n<span class="line"><span>│  │ 最终导致磁盘I/O负载上升      │ │</span></span>\n<span class="line"><span>│  └─────────────────────────────┘ │</span></span>\n<span class="line"><span>└─────────────────────────────────┘</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>生活例子</strong>：就像储物间占用了客厅空间，可能导致其他东西没地方放。</p><p><strong>2. 应用层管理困难</strong></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>劣势2：应用层管理困难</span></span>\n<span class="line"><span>┌─────────────────────────────────┐</span></span>\n<span class="line"><span>│        管理困难                 │</span></span>\n<span class="line"><span>│  ┌─────────────────────────────┐ │</span></span>\n<span class="line"><span>│  │ 应用层无法直接管理           │ │</span></span>\n<span class="line"><span>│  │ 几乎透明管理                │ │</span></span>\n<span class="line"><span>│  │ 难以优化使用策略             │ │</span></span>\n<span class="line"><span>│  └─────────────────────────────┘ │</span></span>\n<span class="line"><span>└─────────────────────────────────┘</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>生活例子</strong>：就像储物间由物业统一管理，您无法直接控制里面放什么。</p><p><strong>3. 多一次磁盘I/O</strong></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>劣势3：多一次磁盘I/O</span></span>\n<span class="line"><span>┌─────────────────────────────────┐</span></span>\n<span class="line"><span>│        磁盘I/O对比              │</span></span>\n<span class="line"><span>│  ┌─────────────────────────────┐ │</span></span>\n<span class="line"><span>│  │ 缓存I/O：读一次，写一次      │ │</span></span>\n<span class="line"><span>│  │ 直接I/O：直接读写            │ │</span></span>\n<span class="line"><span>│  │ 缓存I/O多一次磁盘操作        │ │</span></span>\n<span class="line"><span>│  └─────────────────────────────┘ │</span></span>\n<span class="line"><span>└─────────────────────────────────┘</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>生活例子</strong>：就像通过储物间拿东西，需要先从仓库放到储物间，再从储物间拿；直接拿东西，直接从仓库拿。</p><h3 id="第十章-direct-i-o-直接-i-o" tabindex="-1"><a class="header-anchor" href="#第十章-direct-i-o-直接-i-o"><span>第十章：Direct I/O（直接 I/O）</span></a></h3><h4 id="_10-1-什么是direct-i-o" tabindex="-1"><a class="header-anchor" href="#_10-1-什么是direct-i-o"><span>10.1 什么是Direct I/O？</span></a></h4><p>Direct I/O就像<strong>直接从仓库拿东西</strong>：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>Direct I/O：</span></span>\n<span class="line"><span>┌─────────────────────────────────┐</span></span>\n<span class="line"><span>│        直接I/O                  │</span></span>\n<span class="line"><span>│  ┌─────────────────────────────┐ │</span></span>\n<span class="line"><span>│  │ 绕过Page Cache              │ │</span></span>\n<span class="line"><span>│  │ 直接与磁盘交互               │ │</span></span>\n<span class="line"><span>│  │ 数据直接存储在用户空间       │ │</span></span>\n<span class="line"><span>│  └─────────────────────────────┘ │</span></span>\n<span class="line"><span>└─────────────────────────────────┘</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>生活例子</strong>：就像直接从仓库拿东西，不经过储物间。</p><h4 id="_10-2-direct-i-o的特点" tabindex="-1"><a class="header-anchor" href="#_10-2-direct-i-o的特点"><span>10.2 Direct I/O的特点</span></a></h4><p><strong>1. Write操作特点</strong></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>Direct I/O Write：</span></span>\n<span class="line"><span>┌─────────────────────────────────┐</span></span>\n<span class="line"><span>│        Write特点                │</span></span>\n<span class="line"><span>│  ┌─────────────────────────────┐ │</span></span>\n<span class="line"><span>│  │ 不使用Page Cache             │ │</span></span>\n<span class="line"><span>│  │ 返回成功 = 数据真的落盘      │ │</span></span>\n<span class="line"><span>│  │ 不考虑磁盘自带的缓存         │ │</span></span>\n<span class="line"><span>│  └─────────────────────────────┘ │</span></span>\n<span class="line"><span>└─────────────────────────────────┘</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>2. Read操作特点</strong></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>Direct I/O Read：</span></span>\n<span class="line"><span>┌─────────────────────────────────┐</span></span>\n<span class="line"><span>│        Read特点                 │</span></span>\n<span class="line"><span>│  ┌─────────────────────────────┐ │</span></span>\n<span class="line"><span>│  │ 不使用Page Cache             │ │</span></span>\n<span class="line"><span>│  │ 每次读操作真的从磁盘读取      │ │</span></span>\n<span class="line"><span>│  │ 不会从文件系统缓存中读取      │ │</span></span>\n<span class="line"><span>│  └─────────────────────────────┘ │</span></span>\n<span class="line"><span>└─────────────────────────────────┘</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>生活例子</strong>：</p><ul><li>Write：就像直接把东西放到仓库，不经过储物间</li><li>Read：就像直接从仓库拿东西，不经过储物间</li></ul><h3 id="第十一章-完整的-page-cache-流程图" tabindex="-1"><a class="header-anchor" href="#第十一章-完整的-page-cache-流程图"><span>第十一章：完整的 Page Cache 流程图</span></a></h3><p>让我用最简单的方式画出来：</p>',116),l=(0,e.Lk)("h3",{id:"第十二章-数据持久化流程图",tabindex:"-1"},[(0,e.Lk)("a",{class:"header-anchor",href:"#第十二章-数据持久化流程图"},[(0,e.Lk)("span",null,"第十二章：数据持久化流程图")])],-1),p=(0,e.Fv)('<h3 id="第十三章-总结-给奶奶的话" tabindex="-1"><a class="header-anchor" href="#第十三章-总结-给奶奶的话"><span>第十三章：总结（给奶奶的话）</span></a></h3><p>亲爱的奶奶，Page Cache就像您家里的临时储物间：</p><ol><li><strong>Page Cache</strong> = 临时储物间</li><li><strong>Page</strong> = 标准储物盒</li><li><strong>预读</strong> = 提前准备可能需要的东西</li><li><strong>数据持久化</strong> = 把重要东西保存到保险柜</li><li><strong>内核线程</strong> = 储物间管理员</li><li><strong>Direct I/O</strong> = 直接从仓库拿东西</li></ol><p><strong>Page Cache的优势</strong>：</p><ul><li>取东西快（从储物间比从仓库快）</li><li>减少跑腿次数（一次拿够，多次使用）</li></ul><p><strong>Page Cache的劣势</strong>：</p><ul><li>占用空间（储物间占用了客厅空间）</li><li>管理困难（由物业统一管理）</li><li>多一次操作（先放储物间，再拿）</li></ul><p>整个系统虽然复杂，但就像您每天整理储物间一样，每个部分都有它的作用，最终让您能够快速、高效地使用文件！</p>',8),d={},c=(0,a(66262).A)(d,[["render",function(s,n){const a=(0,e.g2)("Mermaid");return(0,e.uX)(),(0,e.CE)("div",null,[i,(0,e.bF)(a,{id:"mermaid-342",code:"eJxLy8kvT85ILCpRCHHhUgACx+inS7cB0YtljS/W737aP+3ZtPYnu7fFKujq2ik4RT9b3PBs/tKAxPRUBefE5IzUWLAmJ7CsczVE7dM5KxAKnuxYa18LVuQMUlTzbMb6GgWX6OeztzzrW/pkdx9CJcQ6iIEQtU8nLKtRcI0Gqnq+uPH57BkoDgKrcwVb7Bb9dEMbRPjZlH1PWzHc5wZW5h79clEL0Izns3e8bNr9bOqGZ73rIPLuYHmP6Bf7pzydPe/57plPd015PmXF8xXdT3f1Q5S4QJSA2R5gtmc0xD1P1/U865gAUQUmiksqc1IVHBXSMnNyrJTT0lKTUlORJFygEskWqWbJlkgSrnAdacapBkgS7lCJVIs001QLJAlPVKMAGcS7DA=="}),l,(0,e.bF)(a,{id:"mermaid-346",code:"eJwrTi0sTc1LTnXJTEwvSszlUgCCgsSikszkzILEvBIFx4AAhcRihae7pjyfsuL5iu6nu/ox1AQ4g5QEJKanKjgnJmekYijwdg3yc/UBm9PW+mzBjue79gONwlDm4hnsDVL0fHHj89kzwNJgAugGXTu7AGcroPaZT1uXPpu64VnvOrBUgDNU5tmC9hfrNjzZsetFS//LhVsRkhC7rRReNsx6Pn/pszmdSAogciiKOp91r3w6oeNlQ9PzWS3Ppm97NmcXqlKQI4EO2dAGMQfiIiQXg+R1kYyEKHi6rudZxwRUk8DO3tH6cuYSiFEQL8BcDlQA9DdQBdizz3oan+xsfdozDWoQAAU0ulo="}),p])}]]),r=JSON.parse('{"path":"/%E5%A5%B6%E5%A5%B6%E5%85%AB%E8%82%A1/%E5%9F%BA%E7%A1%80/%E8%BF%9B%E7%A8%8B%E5%86%99%E6%96%87%E4%BB%B6%E6%97%B6%EF%BC%8C%E8%BF%9B%E7%A8%8B%E5%8F%91%E7%94%9F%E4%BA%86%E5%B4%A9%E6%BA%83%EF%BC%8C%E5%B7%B2%E5%86%99%E5%85%A5%E7%9A%84%E6%95%B0%E6%8D%AE%E4%BC%9A%E4%B8%A2%E5%A4%B1%E5%90%97_.html","title":"进程写文件时，进程发生了崩溃，已写入的数据会丢失吗？","lang":"zh-CN","frontmatter":{"icon":"pen-to-square","date":"2025-10-07T00:00:00.000Z","category":["后端"],"tag":["奶奶八股"],"description":"进程写文件时，进程发生了崩溃，已写入的数据会丢失吗？ Page Cache 完整教程 - 奶奶都能懂版 第一章：什么是 Page Cache？（就像家里的临时储物间） 1.1 Page Cache 是什么？ 根据小林coding的文章，Page Cache就像您家里的临时储物间： 生活例子：就像您把经常用的东西放在客厅的储物间，而不是每次都去地下室拿，...","head":[["meta",{"property":"og:url","content":"https://xlb3055.github.io/newBlog/%E5%A5%B6%E5%A5%B6%E5%85%AB%E8%82%A1/%E5%9F%BA%E7%A1%80/%E8%BF%9B%E7%A8%8B%E5%86%99%E6%96%87%E4%BB%B6%E6%97%B6%EF%BC%8C%E8%BF%9B%E7%A8%8B%E5%8F%91%E7%94%9F%E4%BA%86%E5%B4%A9%E6%BA%83%EF%BC%8C%E5%B7%B2%E5%86%99%E5%85%A5%E7%9A%84%E6%95%B0%E6%8D%AE%E4%BC%9A%E4%B8%A2%E5%A4%B1%E5%90%97_.html"}],["meta",{"property":"og:site_name","content":"Bin的技术博客"}],["meta",{"property":"og:title","content":"进程写文件时，进程发生了崩溃，已写入的数据会丢失吗？"}],["meta",{"property":"og:description","content":"进程写文件时，进程发生了崩溃，已写入的数据会丢失吗？ Page Cache 完整教程 - 奶奶都能懂版 第一章：什么是 Page Cache？（就像家里的临时储物间） 1.1 Page Cache 是什么？ 根据小林coding的文章，Page Cache就像您家里的临时储物间： 生活例子：就像您把经常用的东西放在客厅的储物间，而不是每次都去地下室拿，..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2026-01-21T08:37:14.000Z"}],["meta",{"property":"article:author","content":"Bin"}],["meta",{"property":"article:tag","content":"奶奶八股"}],["meta",{"property":"article:published_time","content":"2025-10-07T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2026-01-21T08:37:14.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"进程写文件时，进程发生了崩溃，已写入的数据会丢失吗？\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2025-10-07T00:00:00.000Z\\",\\"dateModified\\":\\"2026-01-21T08:37:14.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Bin\\",\\"url\\":\\"/avator_img.jpg\\"}]}"]]},"headers":[{"level":2,"title":"Page Cache 完整教程 - 奶奶都能懂版","slug":"page-cache-完整教程-奶奶都能懂版","link":"#page-cache-完整教程-奶奶都能懂版","children":[{"level":3,"title":"第一章：什么是 Page Cache？（就像家里的临时储物间）","slug":"第一章-什么是-page-cache-就像家里的临时储物间","link":"#第一章-什么是-page-cache-就像家里的临时储物间","children":[]},{"level":3,"title":"第二章：如何查看 Page Cache？（就像查看储物间使用情况）","slug":"第二章-如何查看-page-cache-就像查看储物间使用情况","link":"#第二章-如何查看-page-cache-就像查看储物间使用情况","children":[]},{"level":3,"title":"第三章：Page 与 Page Cache 的关系（就像物品与储物间）","slug":"第三章-page-与-page-cache-的关系-就像物品与储物间","link":"#第三章-page-与-page-cache-的关系-就像物品与储物间","children":[]},{"level":3,"title":"第四章：为什么叫 Page Cache 而不是 Block Cache？","slug":"第四章-为什么叫-page-cache-而不是-block-cache","link":"#第四章-为什么叫-page-cache-而不是-block-cache","children":[]},{"level":3,"title":"第五章：Page Cache 与 Buffer Cache 的关系","slug":"第五章-page-cache-与-buffer-cache-的关系","link":"#第五章-page-cache-与-buffer-cache-的关系","children":[]},{"level":3,"title":"第六章：Page Cache 与预读（就像提前准备）","slug":"第六章-page-cache-与预读-就像提前准备","link":"#第六章-page-cache-与预读-就像提前准备","children":[]},{"level":3,"title":"第七章：数据持久化与一致性（就像保存重要文件）","slug":"第七章-数据持久化与一致性-就像保存重要文件","link":"#第七章-数据持久化与一致性-就像保存重要文件","children":[]},{"level":3,"title":"第八章：内核线程管理（就像管理员）","slug":"第八章-内核线程管理-就像管理员","link":"#第八章-内核线程管理-就像管理员","children":[]},{"level":3,"title":"第九章：Page Cache 的优劣势（就像储物间的优缺点）","slug":"第九章-page-cache-的优劣势-就像储物间的优缺点","link":"#第九章-page-cache-的优劣势-就像储物间的优缺点","children":[]},{"level":3,"title":"第十章：Direct I/O（直接 I/O）","slug":"第十章-direct-i-o-直接-i-o","link":"#第十章-direct-i-o-直接-i-o","children":[]},{"level":3,"title":"第十一章：完整的 Page Cache 流程图","slug":"第十一章-完整的-page-cache-流程图","link":"#第十一章-完整的-page-cache-流程图","children":[]},{"level":3,"title":"第十二章：数据持久化流程图","slug":"第十二章-数据持久化流程图","link":"#第十二章-数据持久化流程图","children":[]},{"level":3,"title":"第十三章：总结（给奶奶的话）","slug":"第十三章-总结-给奶奶的话","link":"#第十三章-总结-给奶奶的话","children":[]}]}],"git":{"createdTime":1759803277000,"updatedTime":1768984634000,"contributors":[{"name":"bin","email":"13598151+binxlb@user.noreply.gitee.com","commits":2}]},"readingTime":{"minutes":9.82,"words":2946},"filePathRelative":"奶奶八股/基础/进程写文件时，进程发生了崩溃，已写入的数据会丢失吗?.md","localizedDate":"2025年10月7日","excerpt":"\\n<h2>Page Cache 完整教程 - 奶奶都能懂版</h2>\\n<h3>第一章：什么是 Page Cache？（就像家里的临时储物间）</h3>\\n<h4>1.1 Page Cache 是什么？</h4>\\n<p>根据<a href=\\"https://xiaolincoding.com/os/6_file_system/pagecache.html#page-cache-%E4%B8%8E-buffer-cache\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">小林coding的文章</a>，Page Cache就像您家里的<strong>临时储物间</strong>：</p>","autoDesc":true}')}}]);