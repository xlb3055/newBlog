"use strict";(self.webpackChunkblog_road=self.webpackChunkblog_road||[]).push([[6878],{66262:(s,i)=>{i.A=(s,i)=>{const a=s.__vccOpts||s;for(const[s,n]of i)a[s]=n;return a}},89774:(s,i,a)=>{a.r(i),a.d(i,{comp:()=>e,data:()=>h});var n=a(20641);const l=[(0,n.Fv)('<hr><h1 id="leader-worker" tabindex="-1"><a class="header-anchor" href="#leader-worker"><span>leader-worker</span></a></h1><h2 id="_1-核心思想-指挥官和工人" tabindex="-1"><a class="header-anchor" href="#_1-核心思想-指挥官和工人"><span>1. 核心思想：指挥官和工人</span></a></h2><p><strong>比喻版</strong>：</p><ul><li>想象你家有一件大事要做：比如做一桌丰盛的饭菜。</li><li><strong>指挥官（Commander）</strong> = 你奶奶坐在椅子上，总览全局，分配任务：谁切菜、谁炒菜、谁洗碗。</li><li><strong>工人（Worker）</strong> = 你的家人或你自己，执行指挥官安排的具体任务。</li></ul><p>这个思想在 AI 世界里，就是 <strong>一个模型负责规划和分工，其他模型或同一模型的不同实例执行具体任务</strong>。</p><p>核心优势：</p><ul><li>可以同时处理多个任务</li><li>更像团队合作，而不是单打独斗</li><li>适合复杂问题的分解和解决</li></ul><hr><h2 id="_2-经典实现-leader-subagent" tabindex="-1"><a class="header-anchor" href="#_2-经典实现-leader-subagent"><span>2. 经典实现：Leader + Subagent</span></a></h2><h3 id="_2-1-claude-风格" tabindex="-1"><a class="header-anchor" href="#_2-1-claude-风格"><span>2.1 Claude 风格</span></a></h3><ul><li><strong>Leader（指挥官）</strong>：规划任务，分配任务给 Subagent</li><li><strong>Subagent（工人）</strong>：每个 Subagent 执行一部分任务，完成后反馈结果</li><li><strong>Leader 收集反馈</strong>，整合结果 → 输出最终答案</li></ul><p>流程图简化版：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>用户需求 → 指挥官(Leader) → 分配任务 → 工人(Subagent) 执行 → 返回结果 → 指挥官整合 → 用户得到答案</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><blockquote><p>示例：查询一个公司的多个部门信息 Leader：拆分成财务、市场、研发三个子任务 Subagent：分别抓取财务、市场、研发信息 Leader：整合三个部门信息 → 输出完整报告</p></blockquote><hr><h2 id="_3-没有-subagent-的实现-用-codex-同一模型" tabindex="-1"><a class="header-anchor" href="#_3-没有-subagent-的实现-用-codex-同一模型"><span>3. 没有 Subagent 的实现（用 Codex / 同一模型）</span></a></h2><p>如果你没有 Subagent，<strong>同一个模型也能扮演指挥官 + 工人的角色</strong>，关键是<strong>让模型在不同上下文中“自我分工”</strong>。</p><h3 id="_3-1-思路" tabindex="-1"><a class="header-anchor" href="#_3-1-思路"><span>3.1 思路</span></a></h3><ol><li><strong>指挥官阶段</strong>：模型生成分任务列表</li><li><strong>工人阶段</strong>：模型逐个执行任务（可以在循环或递归中调用同一模型）</li><li><strong>汇总阶段</strong>：模型整合子任务结果，输出最终答案</li></ol><p>本质就是“在同一模型内模拟多智能体协作”。</p><hr><h3 id="_3-2-python-openai-codex-示例" tabindex="-1"><a class="header-anchor" href="#_3-2-python-openai-codex-示例"><span>3.2 Python + OpenAI Codex 示例</span></a></h3><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" data-title="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 文件路径: multi_agent_codex_demo.py</span></span>\n<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;&quot;&quot;</span></span>\n<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">模拟“指挥官 + 工人”思想的通用实现</span></span>\n<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">用同一个 Codex 模型完成任务分解和执行</span></span>\n<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;&quot;&quot;</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> openai </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> OpenAI</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">client </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;"> OpenAI</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">api_key</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;YOUR_API_KEY&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">def</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> ask_model</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">prompt</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">):</span></span>\n<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    &quot;&quot;&quot;</span></span>\n<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    通用函数：向模型提问，返回文本</span></span>\n<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    &quot;&quot;&quot;</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    response </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> client.completions.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">create</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span></span>\n<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">        model</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;code-davinci-002&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>\n<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">        prompt</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">prompt,</span></span>\n<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">        max_tokens</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">300</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    )</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> response.choices[</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">].text.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">strip</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">def</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> commander_task</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">user_request</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">):</span></span>\n<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    &quot;&quot;&quot;</span></span>\n<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    指挥官阶段：分解任务</span></span>\n<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    &quot;&quot;&quot;</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    prompt </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> f</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;&quot;&quot;</span></span>\n<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    你是指挥官，负责把用户请求拆分成子任务。</span></span>\n<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    用户请求: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">{</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">user_request</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">}</span></span>\n<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    请输出可执行的子任务列表，每个任务一行。</span></span>\n<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    &quot;&quot;&quot;</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    tasks_text </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;"> ask_model</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(prompt)</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    tasks </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [t.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">strip</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> t </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">in</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> tasks_text.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">split</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\\n</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> t.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">strip</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()]</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> tasks</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">def</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> worker_task</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">task</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">):</span></span>\n<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    &quot;&quot;&quot;</span></span>\n<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    工人阶段：执行具体子任务</span></span>\n<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    &quot;&quot;&quot;</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    prompt </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> f</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;&quot;&quot;</span></span>\n<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    你是工人，负责完成以下任务:</span></span>\n<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">    {</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">task</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">}</span></span>\n<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    请输出详细结果。</span></span>\n<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    &quot;&quot;&quot;</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    result </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;"> ask_model</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(prompt)</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> result</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">def</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> integrate_results</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">results</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">):</span></span>\n<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    &quot;&quot;&quot;</span></span>\n<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    汇总阶段：整合所有子任务结果</span></span>\n<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    &quot;&quot;&quot;</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    summary_prompt </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> f</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;&quot;&quot;</span></span>\n<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    你是指挥官，将以下结果整合成最终报告:</span></span>\n<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">    {</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">results</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">}</span></span>\n<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    &quot;&quot;&quot;</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    final_result </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;"> ask_model</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(summary_prompt)</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> final_result</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 使用示例</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">if</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> __name__</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> ==</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;__main__&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    user_request </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;请整理公司 ABC 各部门信息&quot;</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    </span></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    # 指挥官分解任务</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    tasks </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;"> commander_task</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(user_request)</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    </span></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    # 工人执行任务</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    results </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> []</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> task </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">in</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> tasks:</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        result </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;"> worker_task</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(task)</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        results.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">append</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(result)</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    </span></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    # 指挥官汇总</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    final_report </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;"> integrate_results</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\\n</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">join</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(results))</span></span>\n<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">    print</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;=== 最终报告 ===&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>\n<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">    print</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(final_report)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>特点：</p><ul><li>同一个模型既能分任务，又能执行任务</li><li>通过循环和上下文模拟多个“工人”</li><li>不需要 Subagent，也能实现 Leader + Worker 思想</li></ul><hr><h2 id="_4-扩展-多模型-多线程并行实现" tabindex="-1"><a class="header-anchor" href="#_4-扩展-多模型-多线程并行实现"><span>4. 扩展：多模型 / 多线程并行实现</span></a></h2><p>如果想更高效，可以：</p><ol><li><strong>使用多线程</strong>：每个工人任务并行执行</li><li><strong>使用不同模型</strong>：比如 GPT-4 当 Leader，Codex 当 Worker</li><li><strong>异步 API 调用</strong>：大幅提升处理复杂任务的速度</li></ol><hr><h2 id="_5-核心总结-奶奶也能懂" tabindex="-1"><a class="header-anchor" href="#_5-核心总结-奶奶也能懂"><span>5. 核心总结（奶奶也能懂）</span></a></h2><table><thead><tr><th>概念</th><th>AI 对应</th><th>生活类比</th></tr></thead><tbody><tr><td>指挥官（Leader）</td><td>规划、分配任务的模型</td><td>家长/领队</td></tr><tr><td>工人（Worker）</td><td>执行具体子任务的模型/循环调用模型</td><td>家人/小组成员</td></tr><tr><td>汇总</td><td>收集所有工人结果</td><td>家长检查每道菜做好了吗</td></tr><tr><td>优势</td><td>分工、并行、可处理大任务</td><td>一家人分工合作，比一个人忙活快</td></tr></tbody></table><p>核心思想总结：</p><blockquote><p>“把一个大任务拆成小任务，让指挥官分配，工人执行，然后再由指挥官整合。” 无论是 Claude Subagent 还是单 Codex 循环调用，都能实现这个思想。</p></blockquote><hr>',36)],t={},e=(0,a(66262).A)(t,[["render",function(s,i){return(0,n.uX)(),(0,n.CE)("div",null,l)}]]),h=JSON.parse('{"path":"/%E5%A5%B6%E5%A5%B6%E5%85%AB%E8%82%A1/%E5%A4%A7%E6%A8%A1%E5%9E%8B/%E6%8C%87%E6%8C%A5%E5%AE%98%E5%B7%A5%E4%BA%BA%E6%80%9D%E6%83%B3.html","title":"leader-worker","lang":"zh-CN","frontmatter":{"icon":"pen-to-square","date":"2025-01-05T00:00:00.000Z","category":["后端"],"tag":["Skills","大模型"],"description":"leader-worker 1. 核心思想：指挥官和工人 比喻版： 想象你家有一件大事要做：比如做一桌丰盛的饭菜。 指挥官（Commander） = 你奶奶坐在椅子上，总览全局，分配任务：谁切菜、谁炒菜、谁洗碗。 工人（Worker） = 你的家人或你自己，执行指挥官安排的具体任务。 这个思想在 AI 世界里，就是 一个模型负责规划和分工，其他模型或同...","head":[["meta",{"property":"og:url","content":"https://xlb3055.github.io/newBlog/%E5%A5%B6%E5%A5%B6%E5%85%AB%E8%82%A1/%E5%A4%A7%E6%A8%A1%E5%9E%8B/%E6%8C%87%E6%8C%A5%E5%AE%98%E5%B7%A5%E4%BA%BA%E6%80%9D%E6%83%B3.html"}],["meta",{"property":"og:site_name","content":"Bin的技术博客"}],["meta",{"property":"og:title","content":"leader-worker"}],["meta",{"property":"og:description","content":"leader-worker 1. 核心思想：指挥官和工人 比喻版： 想象你家有一件大事要做：比如做一桌丰盛的饭菜。 指挥官（Commander） = 你奶奶坐在椅子上，总览全局，分配任务：谁切菜、谁炒菜、谁洗碗。 工人（Worker） = 你的家人或你自己，执行指挥官安排的具体任务。 这个思想在 AI 世界里，就是 一个模型负责规划和分工，其他模型或同..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2026-01-21T09:06:17.000Z"}],["meta",{"property":"article:author","content":"Bin"}],["meta",{"property":"article:tag","content":"Skills"}],["meta",{"property":"article:tag","content":"大模型"}],["meta",{"property":"article:published_time","content":"2025-01-05T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2026-01-21T09:06:17.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"leader-worker\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2025-01-05T00:00:00.000Z\\",\\"dateModified\\":\\"2026-01-21T09:06:17.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Bin\\",\\"url\\":\\"/avator_img.jpg\\"}]}"]]},"headers":[{"level":2,"title":"1. 核心思想：指挥官和工人","slug":"_1-核心思想-指挥官和工人","link":"#_1-核心思想-指挥官和工人","children":[]},{"level":2,"title":"2. 经典实现：Leader + Subagent","slug":"_2-经典实现-leader-subagent","link":"#_2-经典实现-leader-subagent","children":[{"level":3,"title":"2.1 Claude 风格","slug":"_2-1-claude-风格","link":"#_2-1-claude-风格","children":[]}]},{"level":2,"title":"3. 没有 Subagent 的实现（用 Codex / 同一模型）","slug":"_3-没有-subagent-的实现-用-codex-同一模型","link":"#_3-没有-subagent-的实现-用-codex-同一模型","children":[{"level":3,"title":"3.1 思路","slug":"_3-1-思路","link":"#_3-1-思路","children":[]},{"level":3,"title":"3.2 Python + OpenAI Codex 示例","slug":"_3-2-python-openai-codex-示例","link":"#_3-2-python-openai-codex-示例","children":[]}]},{"level":2,"title":"4. 扩展：多模型 / 多线程并行实现","slug":"_4-扩展-多模型-多线程并行实现","link":"#_4-扩展-多模型-多线程并行实现","children":[]},{"level":2,"title":"5. 核心总结（奶奶也能懂）","slug":"_5-核心总结-奶奶也能懂","link":"#_5-核心总结-奶奶也能懂","children":[]}],"git":{"createdTime":1767596192000,"updatedTime":1768986377000,"contributors":[{"name":"bin","email":"13598151+binxlb@user.noreply.gitee.com","commits":4}]},"readingTime":{"minutes":3.53,"words":1058},"filePathRelative":"奶奶八股/大模型/指挥官工人思想.md","localizedDate":"2025年1月5日","excerpt":"<hr>\\n<h1>leader-worker</h1>\\n<h2>1. 核心思想：指挥官和工人</h2>\\n<p><strong>比喻版</strong>：</p>\\n<ul>\\n<li>想象你家有一件大事要做：比如做一桌丰盛的饭菜。</li>\\n<li><strong>指挥官（Commander）</strong> = 你奶奶坐在椅子上，总览全局，分配任务：谁切菜、谁炒菜、谁洗碗。</li>\\n<li><strong>工人（Worker）</strong> = 你的家人或你自己，执行指挥官安排的具体任务。</li>\\n</ul>\\n<p>这个思想在 AI 世界里，就是 <strong>一个模型负责规划和分工，其他模型或同一模型的不同实例执行具体任务</strong>。</p>","autoDesc":true}')}}]);