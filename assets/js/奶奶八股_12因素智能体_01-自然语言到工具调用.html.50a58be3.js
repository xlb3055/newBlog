"use strict";(self.webpackChunkblog_road=self.webpackChunkblog_road||[]).push([[1697],{66262:(i,s)=>{s.A=(i,s)=>{const a=i.__vccOpts||i;for(const[i,e]of s)a[i]=e;return a}},18059:(i,s,a)=>{a.r(s),a.d(s,{comp:()=>n,data:()=>r});var e=a(20641);const t=[(0,e.Fv)('<h1 id="因素01-自然语言到工具调用" tabindex="-1"><a class="header-anchor" href="#因素01-自然语言到工具调用"><span>因素01：自然语言到工具调用</span></a></h1><blockquote><p>来源：12-Factor Agents / Factor 1（Natural Language to Tool Calls）</p></blockquote><h2 id="一句话先懂" tabindex="-1"><a class="header-anchor" href="#一句话先懂"><span>一句话先懂</span></a></h2><p>把“人话需求”翻译成“结构化动作”，让模型负责理解，让代码负责执行。</p><h2 id="奶奶版先理解" tabindex="-1"><a class="header-anchor" href="#奶奶版先理解"><span>奶奶版先理解</span></a></h2><p>你跟家里人说：</p><ul><li>“帮我交电费 500”</li></ul><p>这句话要真正落地，必须变成明确单据：</p><ul><li>任务：交电费</li><li>金额：500</li><li>账户：国家电网 xx 户号</li><li>截止时间：今晚 20:00</li></ul><p>这张单据就是工具调用参数。没有这张单据，执行就会靠猜。</p><h2 id="原文核心思想-我拆成-4-步" tabindex="-1"><a class="header-anchor" href="#原文核心思想-我拆成-4-步"><span>原文核心思想（我拆成 4 步）</span></a></h2><ol><li><strong>模型做语义理解</strong>：提取意图与参数。</li><li><strong>输出结构化对象</strong>：通常是 JSON（intent + args）。</li><li><strong>确定性代码执行</strong>：权限校验、参数补全、调用 API。</li><li><strong>执行结果回灌</strong>：把结果放回上下文，进入下一步决策。</li></ol><h2 id="真实业务例子-支付链接创建" tabindex="-1"><a class="header-anchor" href="#真实业务例子-支付链接创建"><span>真实业务例子：支付链接创建</span></a></h2><p>用户在 Slack 发：</p><ul><li>“给 Terri 创建 750 美元活动赞助支付链接。”</li></ul><p>模型应输出：</p><div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" data-title="json" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  &quot;intent&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;create_payment_link&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  &quot;amount&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">750</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  &quot;customer&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Terri&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  &quot;memo&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;AI meetup sponsorship&quot;</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>后端代码做：</p><ul><li>customer 名称映射到 customer_id</li><li>amount 与币种校验</li><li>权限检查（是否允许创建支付链接）</li><li>调 Stripe API</li></ul><h2 id="可执行落地步骤" tabindex="-1"><a class="header-anchor" href="#可执行落地步骤"><span>可执行落地步骤</span></a></h2><ol><li>先定义 <code>intent</code> 白名单，禁止自由发挥。</li><li>每个 intent 定义必填参数与类型（JSON Schema）。</li><li>执行前统一做 <code>validate -&gt; authorize -&gt; execute</code>。</li><li>执行后记录事件（谁触发、调用参数、结果、耗时）。</li></ol><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" data-title="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> step.intent </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">==</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;create_payment_link&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">    validate</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(step)</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">    authorize</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(user, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;payment_link:create&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    result </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> stripe.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">create</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(step.args)</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">    append_event</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;create_payment_link_result&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, result)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="常见误区" tabindex="-1"><a class="header-anchor" href="#常见误区"><span>常见误区</span></a></h2><ul><li>只让模型输出自然语言，不输出结构化字段。</li><li>没有 unknown intent 兜底，导致异常流程。</li><li>把模型输出直接执行，跳过权限和风控。</li></ul><h2 id="我的思考" tabindex="-1"><a class="header-anchor" href="#我的思考"><span>我的思考</span></a></h2><p>这条看似简单，其实是“AI 工程化分界线”。</p><ul><li>Demo 阶段：模型一句话就能看起来很聪明。</li><li>生产阶段：必须可审计、可回放、可追责。</li></ul><p>所以我认同原文：模型最擅长“决定做什么”，但不该直接拥有“做了算”的权力。</p><h2 id="小结" tabindex="-1"><a class="header-anchor" href="#小结"><span>小结</span></a></h2><ul><li>人话要变成结构化动作。</li><li>模型负责决策，代码负责责任。</li><li>可控性来自校验、权限和审计。</li></ul>',30)],l={},n=(0,a(66262).A)(l,[["render",function(i,s){return(0,e.uX)(),(0,e.CE)("div",null,t)}]]),r=JSON.parse('{"path":"/%E5%A5%B6%E5%A5%B6%E5%85%AB%E8%82%A1/12%E5%9B%A0%E7%B4%A0%E6%99%BA%E8%83%BD%E4%BD%93/01-%E8%87%AA%E7%84%B6%E8%AF%AD%E8%A8%80%E5%88%B0%E5%B7%A5%E5%85%B7%E8%B0%83%E7%94%A8.html","title":"因素01：自然语言到工具调用","lang":"zh-CN","frontmatter":{"icon":"pen-to-square","date":"2026-02-13T00:00:00.000Z","category":["后端"],"tag":["12因素智能体","大模型","Factor-01"],"description":"因素01：自然语言到工具调用 来源：12-Factor Agents / Factor 1（Natural Language to Tool Calls） 一句话先懂 把“人话需求”翻译成“结构化动作”，让模型负责理解，让代码负责执行。 奶奶版先理解 你跟家里人说： “帮我交电费 500” 这句话要真正落地，必须变成明确单据： 任务：交电费 金额：50...","head":[["meta",{"property":"og:url","content":"https://xlb3055.github.io/newBlog/%E5%A5%B6%E5%A5%B6%E5%85%AB%E8%82%A1/12%E5%9B%A0%E7%B4%A0%E6%99%BA%E8%83%BD%E4%BD%93/01-%E8%87%AA%E7%84%B6%E8%AF%AD%E8%A8%80%E5%88%B0%E5%B7%A5%E5%85%B7%E8%B0%83%E7%94%A8.html"}],["meta",{"property":"og:site_name","content":"Bin的技术博客"}],["meta",{"property":"og:title","content":"因素01：自然语言到工具调用"}],["meta",{"property":"og:description","content":"因素01：自然语言到工具调用 来源：12-Factor Agents / Factor 1（Natural Language to Tool Calls） 一句话先懂 把“人话需求”翻译成“结构化动作”，让模型负责理解，让代码负责执行。 奶奶版先理解 你跟家里人说： “帮我交电费 500” 这句话要真正落地，必须变成明确单据： 任务：交电费 金额：50..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2026-02-13T07:34:00.000Z"}],["meta",{"property":"article:author","content":"Bin"}],["meta",{"property":"article:tag","content":"12因素智能体"}],["meta",{"property":"article:tag","content":"大模型"}],["meta",{"property":"article:tag","content":"Factor-01"}],["meta",{"property":"article:published_time","content":"2026-02-13T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2026-02-13T07:34:00.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"因素01：自然语言到工具调用\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2026-02-13T00:00:00.000Z\\",\\"dateModified\\":\\"2026-02-13T07:34:00.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Bin\\",\\"url\\":\\"/avator_img.jpg\\"}]}"]]},"headers":[{"level":2,"title":"一句话先懂","slug":"一句话先懂","link":"#一句话先懂","children":[]},{"level":2,"title":"奶奶版先理解","slug":"奶奶版先理解","link":"#奶奶版先理解","children":[]},{"level":2,"title":"原文核心思想（我拆成 4 步）","slug":"原文核心思想-我拆成-4-步","link":"#原文核心思想-我拆成-4-步","children":[]},{"level":2,"title":"真实业务例子：支付链接创建","slug":"真实业务例子-支付链接创建","link":"#真实业务例子-支付链接创建","children":[]},{"level":2,"title":"可执行落地步骤","slug":"可执行落地步骤","link":"#可执行落地步骤","children":[]},{"level":2,"title":"常见误区","slug":"常见误区","link":"#常见误区","children":[]},{"level":2,"title":"我的思考","slug":"我的思考","link":"#我的思考","children":[]},{"level":2,"title":"小结","slug":"小结","link":"#小结","children":[]}],"git":{"createdTime":1770968040000,"updatedTime":1770968040000,"contributors":[{"name":"bin","email":"13598151+binxlb@user.noreply.gitee.com","commits":1}]},"readingTime":{"minutes":1.92,"words":575},"filePathRelative":"奶奶八股/12因素智能体/01-自然语言到工具调用.md","localizedDate":"2026年2月13日","excerpt":"\\n<blockquote>\\n<p>来源：12-Factor Agents / Factor 1（Natural Language to Tool Calls）</p>\\n</blockquote>\\n<h2>一句话先懂</h2>\\n<p>把“人话需求”翻译成“结构化动作”，让模型负责理解，让代码负责执行。</p>\\n<h2>奶奶版先理解</h2>\\n<p>你跟家里人说：</p>\\n<ul>\\n<li>“帮我交电费 500”</li>\\n</ul>\\n<p>这句话要真正落地，必须变成明确单据：</p>\\n<ul>\\n<li>任务：交电费</li>\\n<li>金额：500</li>\\n<li>账户：国家电网 xx 户号</li>\\n<li>截止时间：今晚 20:00</li>\\n</ul>","autoDesc":true}')}}]);