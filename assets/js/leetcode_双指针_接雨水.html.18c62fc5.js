"use strict";(self.webpackChunkblog_road=self.webpackChunkblog_road||[]).push([[5663],{66262:(i,s)=>{s.A=(i,s)=>{const a=i.__vccOpts||i;for(const[i,e]of s)a[i]=e;return a}},92977:(i,s,a)=>{a.r(s),a.d(s,{comp:()=>t,data:()=>h});var e=a(20641);const l=[(0,e.Fv)('<h1 id="_42-接雨水" tabindex="-1"><a class="header-anchor" href="#_42-接雨水"><span>42. 接雨水</span></a></h1><h3 id="题目-接雨水" tabindex="-1"><a class="header-anchor" href="#题目-接雨水"><span><strong>题目：接雨水</strong></span></a></h3><p><strong>描述：</strong></p><p>给定 <code>n</code> 个非负整数表示每个宽度为 1 的柱子的高度图，计算它们能接住多少雨水。</p><hr><h3 id="示例" tabindex="-1"><a class="header-anchor" href="#示例"><span><strong>示例：</strong></span></a></h3><p><strong>示例 1:</strong></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>输入：height = [0,1,0,2,1,0,1,3,2,1,2,1]</span></span>\n<span class="line"><span>输出：6</span></span>\n<span class="line"><span>解释：在这种情况下，计算能接的雨水总量为 6。</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>示例 2:</strong></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>输入：height = [4,2,0,3,2,5]</span></span>\n<span class="line"><span>输出：9</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><hr><h3 id="解题思路" tabindex="-1"><a class="header-anchor" href="#解题思路"><span><strong>解题思路：</strong></span></a></h3><hr><h3 id="问题的本质" tabindex="-1"><a class="header-anchor" href="#问题的本质"><span><strong>问题的本质</strong></span></a></h3><p>给定一个数组，数组中的每个元素表示一个柱子的高度，每个柱子的宽度为 1。雨水只能积存在柱子之间的低洼区域中，我们需要计算柱子之间能够接住的雨水总量。</p><hr><h3 id="如何判断一个位置能接多少雨水" tabindex="-1"><a class="header-anchor" href="#如何判断一个位置能接多少雨水"><span><strong>如何判断一个位置能接多少雨水？</strong></span></a></h3><p>在柱子 <code>i</code> 位置上能接的雨水量由以下公式决定：</p><div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" data-title="text" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>rain[i] = min(maxHeightLeft, maxHeightRight) - height[i]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><code>maxHeightLeft</code>：柱子 <code>i</code> 左边的最高柱子的高度。</li><li><code>maxHeightRight</code>：柱子 <code>i</code> 右边的最高柱子的高度。</li><li><code>height[i]</code>：柱子 <code>i</code> 自身的高度。</li><li><strong>解释公式</strong>：<br> 柱子 <code>i</code> 上的雨水量是左右最高柱子中较矮的那个高度减去当前柱子的高度。如果 <code>min(maxHeightLeft, maxHeightRight) &lt;= height[i]</code>，则雨水量为 <code>0</code>。</li></ul><hr><h3 id="双指针法的思路" tabindex="-1"><a class="header-anchor" href="#双指针法的思路"><span><strong>双指针法的思路</strong></span></a></h3><p>我们使用 <strong>双指针法</strong>，同时维护两侧的最大高度，避免对每个位置重复计算，从而优化时间复杂度。</p><h4 id="步骤" tabindex="-1"><a class="header-anchor" href="#步骤"><span><strong>步骤：</strong></span></a></h4><ol><li><p><strong>定义两个指针</strong>：</p><ul><li>左指针 <code>left</code> 从数组的左端开始。</li><li>右指针 <code>right</code> 从数组的右端开始。</li></ul></li><li><p><strong>维护两侧最大高度</strong>：</p><ul><li><code>leftMax</code>：左侧最高柱子的高度。</li><li><code>rightMax</code>：右侧最高柱子的高度。</li></ul></li><li><p><strong>计算每个位置的雨水量</strong>：</p><ul><li>如果 <code>height[left] &lt; height[right]</code>： <ul><li><code>leftMax</code> 决定了当前柱子 <code>left</code> 能接的雨水量。</li><li>如果 <code>height[left] &lt; leftMax</code>，则当前柱子能接的雨水量为 <code>leftMax - height[left]</code>。</li><li>然后移动左指针 <code>left++</code>。</li></ul></li><li>如果 <code>height[left] &gt;= height[right]</code>： <ul><li><code>rightMax</code> 决定了当前柱子 <code>right</code> 能接的雨水量。</li><li>如果 <code>height[right] &lt; rightMax</code>，则当前柱子能接的雨水量为 <code>rightMax - height[right]</code>。</li><li>然后移动右指针 <code>right--</code>。</li></ul></li></ul></li><li><p><strong>循环结束条件</strong>：当 <code>left</code> 和 <code>right</code> 指针相遇时，停止循环。</p></li><li><p><strong>结果</strong>：将所有柱子上能接的雨水量累加，返回总量。</p></li></ol><hr><h3 id="举例分析" tabindex="-1"><a class="header-anchor" href="#举例分析"><span><strong>举例分析</strong></span></a></h3><h4 id="输入-height-0-1-0-2-1-0-1-3-2-1-2-1" tabindex="-1"><a class="header-anchor" href="#输入-height-0-1-0-2-1-0-1-3-2-1-2-1"><span>输入：<code>height = [0,1,0,2,1,0,1,3,2,1,2,1]</code></span></a></h4><p>我们一步步模拟双指针法：</p><ol><li><p><strong>初始状态</strong>：</p><ul><li><code>left = 0</code>，<code>right = 11</code>，<code>leftMax = 0</code>，<code>rightMax = 0</code>，<code>totalWater = 0</code></li></ul></li><li><p><strong>第一步</strong>：<code>height[left] = 0</code>，<code>height[right] = 1</code></p><ul><li><code>height[left] &lt; height[right]</code>，更新 <code>leftMax = max(0, height[left]) = 0</code>。</li><li>当前雨水量为 <code>leftMax - height[left] = 0 - 0 = 0</code>。</li><li>移动左指针：<code>left = 1</code>。</li></ul></li><li><p><strong>第二步</strong>：<code>height[left] = 1</code>，<code>height[right] = 1</code></p><ul><li><code>height[left] &gt;= height[right]</code>，更新 <code>rightMax = max(0, height[right]) = 1</code>。</li><li>当前雨水量为 <code>rightMax - height[right] = 1 - 1 = 0</code>。</li><li>移动右指针：<code>right = 10</code>。</li></ul></li><li><p><strong>第三步</strong>：<code>height[left] = 1</code>，<code>height[right] = 2</code></p><ul><li><code>height[left] &lt; height[right]</code>，更新 <code>leftMax = max(0, height[left]) = 1</code>。</li><li>当前雨水量为 <code>leftMax - height[left] = 1 - 1 = 0</code>。</li><li>移动左指针：<code>left = 2</code>。</li></ul></li><li><p><strong>第四步</strong>：<code>height[left] = 0</code>，<code>height[right] = 2</code></p><ul><li><code>height[left] &lt; height[right]</code>，更新 <code>leftMax = max(1, height[left]) = 1</code>。</li><li>当前雨水量为 <code>leftMax - height[left] = 1 - 0 = 1</code>。</li><li>积累雨水：<code>totalWater = 1</code>。</li><li>移动左指针：<code>left = 3</code>。</li></ul></li><li><p><strong>继续移动指针并计算</strong>：</p><ul><li>按上述步骤继续计算每次能接的雨水，最终得到总量为 <code>6</code>。</li></ul></li></ol><hr><h3 id="代码实现" tabindex="-1"><a class="header-anchor" href="#代码实现"><span><strong>代码实现</strong></span></a></h3><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> java.util.Scanner</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Main</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> main</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[] </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">args</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>\n<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        Scanner</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> scanner</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> Scanner</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">in</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // 读取数组长度</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        int</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> n</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> scanner</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">nextInt</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>\n<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#C678DD;">        int</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">[] </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">height</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#C18401;--shiki-dark:#C678DD;"> int</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[n];</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // 读取数组元素</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> i</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; i </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> n; i++) {</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            height[i] </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> scanner</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">nextInt</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        Solution</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> solution</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> Solution</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">solution</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">trap</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(height));</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        scanner</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">close</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Solution</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> int</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> trap</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[] </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">height</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (height </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">==</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> null</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> ||</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> height</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">length</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> ==</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">return</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        int</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> left</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, right </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> height</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">length</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> -</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;  </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// 初始化指针</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        int</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> leftMax</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, rightMax </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;  </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// 记录两侧的最大高度</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        int</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> totalWater</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        while</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (left </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> right) {</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (height[left] </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> height[right]) {</span></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">                // 左边较低，计算左边的雨水</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">                if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (height[left] </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&gt;=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> leftMax) {</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                    leftMax </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> height[left];  </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// 更新左侧最大高度</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                } </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">else</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                    totalWater </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">+=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> leftMax </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> height[left];  </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// 接的雨水</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                }</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                left++;  </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// 移动左指针</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            } </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">else</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">                // 右边较低，计算右边的雨水</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">                if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (height[right] </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&gt;=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> rightMax) {</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                    rightMax </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> height[right];  </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// 更新右侧最大高度</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                } </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">else</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                    totalWater </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">+=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> rightMax </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> height[right];  </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// 接的雨水</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                }</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                right--;  </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// 移动右指针</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            }</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> totalWater;</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><p>这是 <strong>双指针法</strong> 的核心逻辑，下面我详细解释 <strong>为什么要从较低的一侧计算雨水</strong>。</p><hr><h3 id="核心概念-雨水的计算依赖于较矮的那一侧" tabindex="-1"><a class="header-anchor" href="#核心概念-雨水的计算依赖于较矮的那一侧"><span><strong>核心概念：雨水的计算依赖于较矮的那一侧</strong></span></a></h3><p>雨水的计算公式为：</p><div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" data-title="text" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>rain[i] = min(maxHeightLeft, maxHeightRight) - height[i]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>这意味着：</p><ul><li>当前柱子 <code>i</code> 上的雨水量取决于柱子左边的最高柱子 (<code>maxHeightLeft</code>) 和右边的最高柱子 (<code>maxHeightRight</code>) 中较矮的那个。</li><li>因为水会从矮的一侧溢出，最终限制雨水量的永远是较矮的那一侧。</li></ul><hr><h3 id="为什么从较低的一侧开始计算" tabindex="-1"><a class="header-anchor" href="#为什么从较低的一侧开始计算"><span><strong>为什么从较低的一侧开始计算？</strong></span></a></h3><p>假设当前左右指针为 <code>left</code> 和 <code>right</code>，分别记录了两端的柱子，<code>height[left]</code> 和 <code>height[right]</code> 是对应柱子的高度。</p><h4 id="情况-1-height-left-height-right" tabindex="-1"><a class="header-anchor" href="#情况-1-height-left-height-right"><span>情况 1：<code>height[left] &lt; height[right]</code></span></a></h4><ul><li>此时，<code>height[left]</code> 决定了当前可以接的水量，<strong>因为左边较低，右边的高度不会限制雨水量</strong>。</li><li>具体来说： <ul><li>左侧的水量由 <code>leftMax</code> 决定，即 <code>leftMax - height[left]</code>。</li><li>因为左边较矮，所以无论右边的高度如何，都无法影响左边的积水。</li><li>因此，我们只需要考虑左边的柱子，移动左指针 <code>left++</code>，更新 <code>leftMax</code>。</li></ul></li></ul><h4 id="情况-2-height-left-height-right" tabindex="-1"><a class="header-anchor" href="#情况-2-height-left-height-right"><span>情况 2：<code>height[left] &gt;= height[right]</code></span></a></h4><ul><li>此时，<code>height[right]</code> 决定了当前可以接的水量，<strong>因为右边较低，左边的高度不会限制雨水量</strong>。</li><li>具体来说： <ul><li>右侧的水量由 <code>rightMax</code> 决定，即 <code>rightMax - height[right]</code>。</li><li>因为右边较矮，所以无论左边的高度如何，都无法影响右边的积水。</li><li>因此，我们只需要考虑右边的柱子，移动右指针 <code>right--</code>，更新 <code>rightMax</code>。</li></ul></li></ul><hr><h3 id="举例说明" tabindex="-1"><a class="header-anchor" href="#举例说明"><span><strong>举例说明</strong></span></a></h3><h4 id="示例-height-0-1-0-2-1-0-1-3-2-1-2-1" tabindex="-1"><a class="header-anchor" href="#示例-height-0-1-0-2-1-0-1-3-2-1-2-1"><span>示例：<code>height = [0, 1, 0, 2, 1, 0, 1, 3, 2, 1, 2, 1]</code></span></a></h4><p>初始状态：</p><ul><li>左指针 <code>left = 0</code>，右指针 <code>right = 11</code>。</li><li>初始高度：<code>height[left] = 0</code>，<code>height[right] = 1</code>。</li></ul><p><strong>第一步：比较两侧高度</strong></p><ul><li><code>height[left] = 0</code> &lt; <code>height[right] = 1</code>： <ul><li>左侧较矮，因此左侧的水量由 <code>leftMax</code> 决定，计算 <code>leftMax - height[left] = 0 - 0 = 0</code>。</li><li>移动左指针：<code>left++</code>。</li></ul></li></ul><p><strong>第二步：更新指针</strong></p><ul><li>新的 <code>left = 1</code>，<code>right = 11</code>。</li><li>左侧高度 <code>height[left] = 1</code>，右侧高度 <code>height[right] = 1</code>。</li></ul><p><strong>第二步：比较两侧高度</strong></p><ul><li><code>height[left] = 1</code> &gt;= <code>height[right] = 1</code>： <ul><li>右侧较矮，因此右侧的水量由 <code>rightMax</code> 决定，计算 <code>rightMax - height[right] = 1 - 1 = 0</code>。</li><li>移动右指针：<code>right--</code>。</li></ul></li></ul><p>...</p><p>通过这种方式，<strong>始终从较矮的一侧计算雨水</strong>，逐步缩小指针范围。</p><hr><h3 id="总结-为什么从较低的那一侧计算" tabindex="-1"><a class="header-anchor" href="#总结-为什么从较低的那一侧计算"><span><strong>总结：为什么从较低的那一侧计算？</strong></span></a></h3><ul><li>较矮的一侧限制了当前能够接的雨水量，较高的一侧不会对这部分水量产生影响。</li><li>移动较矮的一侧能够更新对应的最大高度，并且尽可能地扩大搜索范围。</li><li>这也是双指针法能够高效解决问题的关键逻辑所在。</li></ul><h3 id="时间复杂度分析" tabindex="-1"><a class="header-anchor" href="#时间复杂度分析"><span><strong>时间复杂度分析</strong></span></a></h3><ul><li><strong>时间复杂度</strong>：<code>O(n)</code>，我们只需遍历一次数组。</li><li><strong>空间复杂度</strong>：<code>O(1)</code>，只使用了常量级别的额外空间。</li></ul><hr>',67)],n={},t=(0,a(66262).A)(n,[["render",function(i,s){return(0,e.uX)(),(0,e.CE)("div",null,l)}]]),h=JSON.parse('{"path":"/leetcode/%E5%8F%8C%E6%8C%87%E9%92%88/%E6%8E%A5%E9%9B%A8%E6%B0%B4.html","title":"42. 接雨水","lang":"zh-CN","frontmatter":{"icon":"pen-to-square","date":"2024-11-18T00:00:00.000Z","category":["后端"],"tag":["双指针","leecode"],"description":"42. 接雨水 题目：接雨水 描述： 给定 n 个非负整数表示每个宽度为 1 的柱子的高度图，计算它们能接住多少雨水。 示例： 示例 1: 示例 2: 解题思路： 问题的本质 给定一个数组，数组中的每个元素表示一个柱子的高度，每个柱子的宽度为 1。雨水只能积存在柱子之间的低洼区域中，我们需要计算柱子之间能够接住的雨水总量。 如何判断一个位置能接多少雨水...","head":[["meta",{"property":"og:url","content":"https://xlb3055.github.io/newBlog/leetcode/%E5%8F%8C%E6%8C%87%E9%92%88/%E6%8E%A5%E9%9B%A8%E6%B0%B4.html"}],["meta",{"property":"og:site_name","content":"Bin的技术博客"}],["meta",{"property":"og:title","content":"42. 接雨水"}],["meta",{"property":"og:description","content":"42. 接雨水 题目：接雨水 描述： 给定 n 个非负整数表示每个宽度为 1 的柱子的高度图，计算它们能接住多少雨水。 示例： 示例 1: 示例 2: 解题思路： 问题的本质 给定一个数组，数组中的每个元素表示一个柱子的高度，每个柱子的宽度为 1。雨水只能积存在柱子之间的低洼区域中，我们需要计算柱子之间能够接住的雨水总量。 如何判断一个位置能接多少雨水..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-12-26T05:35:56.000Z"}],["meta",{"property":"article:author","content":"Bin"}],["meta",{"property":"article:tag","content":"双指针"}],["meta",{"property":"article:tag","content":"leecode"}],["meta",{"property":"article:published_time","content":"2024-11-18T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2025-12-26T05:35:56.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"42. 接雨水\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2024-11-18T00:00:00.000Z\\",\\"dateModified\\":\\"2025-12-26T05:35:56.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Bin\\",\\"url\\":\\"/avator_img.jpg\\"}]}"]]},"headers":[{"level":3,"title":"题目：接雨水","slug":"题目-接雨水","link":"#题目-接雨水","children":[]},{"level":3,"title":"示例：","slug":"示例","link":"#示例","children":[]},{"level":3,"title":"解题思路：","slug":"解题思路","link":"#解题思路","children":[]},{"level":3,"title":"问题的本质","slug":"问题的本质","link":"#问题的本质","children":[]},{"level":3,"title":"如何判断一个位置能接多少雨水？","slug":"如何判断一个位置能接多少雨水","link":"#如何判断一个位置能接多少雨水","children":[]},{"level":3,"title":"双指针法的思路","slug":"双指针法的思路","link":"#双指针法的思路","children":[]},{"level":3,"title":"举例分析","slug":"举例分析","link":"#举例分析","children":[]},{"level":3,"title":"代码实现","slug":"代码实现","link":"#代码实现","children":[]},{"level":3,"title":"核心概念：雨水的计算依赖于较矮的那一侧","slug":"核心概念-雨水的计算依赖于较矮的那一侧","link":"#核心概念-雨水的计算依赖于较矮的那一侧","children":[]},{"level":3,"title":"为什么从较低的一侧开始计算？","slug":"为什么从较低的一侧开始计算","link":"#为什么从较低的一侧开始计算","children":[]},{"level":3,"title":"举例说明","slug":"举例说明","link":"#举例说明","children":[]},{"level":3,"title":"总结：为什么从较低的那一侧计算？","slug":"总结-为什么从较低的那一侧计算","link":"#总结-为什么从较低的那一侧计算","children":[]},{"level":3,"title":"时间复杂度分析","slug":"时间复杂度分析","link":"#时间复杂度分析","children":[]}],"git":{"createdTime":1732275083000,"updatedTime":1766727356000,"contributors":[{"name":"bin","email":"13598151+binxlb@user.noreply.gitee.com","commits":4}]},"readingTime":{"minutes":5.88,"words":1764},"filePathRelative":"leetcode/双指针/接雨水.md","localizedDate":"2024年11月18日","excerpt":"\\n<h3><strong>题目：接雨水</strong></h3>\\n<p><strong>描述：</strong></p>\\n<p>给定 <code>n</code> 个非负整数表示每个宽度为 1 的柱子的高度图，计算它们能接住多少雨水。</p>\\n<hr>\\n<h3><strong>示例：</strong></h3>\\n<p><strong>示例 1:</strong></p>\\n<div class=\\"language- line-numbers-mode\\" data-highlighter=\\"shiki\\" data-ext=\\"\\" data-title=\\"\\" style=\\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\\"><pre class=\\"shiki shiki-themes one-light one-dark-pro vp-code\\"><code><span class=\\"line\\"><span>输入：height = [0,1,0,2,1,0,1,3,2,1,2,1]</span></span>\\n<span class=\\"line\\"><span>输出：6</span></span>\\n<span class=\\"line\\"><span>解释：在这种情况下，计算能接的雨水总量为 6。</span></span></code></pre>\\n<div class=\\"line-numbers\\" aria-hidden=\\"true\\" style=\\"counter-reset:line-number 0\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div>","autoDesc":true}')}}]);