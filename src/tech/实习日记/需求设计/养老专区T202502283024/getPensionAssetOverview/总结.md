---
icon: pen-to-square
date: 2025-4-18
category:
- åç«¯
tag:
- å®ä¹ 
---
# æ€»ç»“
# 1.å®šä¹‰å¯¹åº”çš„æšä¸¾æ‰¾åˆ°æ•°æ®åº“ä¸­çš„urlæ‹¿åˆ°å¯¹åº”çš„mackæ•°æ®

```
String resBody = HttpUtils.httpEsbSend(UrlConfigEnum.DEFAULT_NEW_PENSION_OVERVIEW.getUrlId(),
        HttpRealPostInfo.builder().body(getBody(ZERO, custNo)).header(getHeader(ZERO)).build());
```

```
select * from WP_RESTFUL_ESB_INFO where id LIKE 'DE%';
```

![image-20250403132812018](/Users/xiaoxu/Library/Application Support/typora-user-images/image-20250403132812018.png)

# 2.Dtoå’ŒResåˆ†å±‚

------

## âœ… è§£è€¦åˆ†å±‚ï¼ŒèŒè´£åˆ†æ˜**

| å±‚çº§       | å¯¹è±¡                          | ä½œç”¨                                 |
| ---------- | ----------------------------- | ------------------------------------ |
| Service å±‚ | `DTO`ï¼ˆData Transfer Objectï¼‰ | å†…éƒ¨ä¸šåŠ¡ä¼ è¾“ï¼Œå¯èƒ½åŒ…å«æ•æ„Ÿæˆ–ä¸­é—´å­—æ®µ |
| API å±‚     | `Res`ï¼ˆResponse View Objectï¼‰ | å¯¹å¤–å±•ç¤ºï¼Œä»…è¿”å›å‰ç«¯éœ€è¦çš„æ•°æ®å­—æ®µ   |

------

## âœ… ä¸ºä»€ä¹ˆä¸èƒ½ç›´æ¥è¿”å› DTOï¼Ÿ

### ğŸŸ¥ é£é™© 1ï¼šæ¥å£å˜æ›´è¢«â€œå†…éƒ¨å­—æ®µâ€ç‰µè¿

Service å±‚ DTO å¯èƒ½åŒ…å«ä¸€äº›ä¸­é—´å­—æ®µï¼Œæ¯”å¦‚ï¼š

```java
private BigDecimal internalFee;
private String internalRiskLevel;
```

è¿™äº›å­—æ®µå¯èƒ½æ˜¯ç”¨äºåç»­è®¡ç®—æˆ–é£æ§çš„ï¼Œ**å‰ç«¯/ç”¨æˆ·æ ¹æœ¬ä¸è¯¥çœ‹åˆ°**ã€‚

------

### ğŸŸ¥ é£é™© 2ï¼šDTO æ”¹äº†ï¼Œå‰ç«¯æ¥å£å°±â€œå´©äº†â€

æ¯”å¦‚ä½  DTO æ–°å¢äº†å­—æ®µç”¨äºå†…éƒ¨è®¡ç®—ï¼Œç»“æœ API ç›´æ¥è¿”å›ï¼Œå‰ç«¯çªç„¶æ”¶åˆ°ä¸€ä¸ªä¸è®¤è¯†çš„å­—æ®µï¼Œé¡µé¢å¯èƒ½å¼‚å¸¸æŠ¥é”™ã€‚

------

# 3.è¿”å›æ•°æ®å¤„ç†

```java
if (StrUtil.isBlank(responseJson)) {
```

ğŸ‘‰ åˆ¤æ–­è¿œç¨‹è¿”å›æ˜¯å¦ä¸ºç©ºå­—ç¬¦ä¸²ï¼Œé¿å…åç»­ JSON è§£æå´©æºƒã€‚

------

```java
root = JSONUtil.parseObj(responseJson);
```

ğŸ‘‰ æŠŠ JSON å­—ç¬¦ä¸²è§£æä¸º `JSONObject` å¯¹è±¡ï¼ˆä½¿ç”¨ Hutool å·¥å…·ï¼‰ï¼Œä¾¿äºåç»­è¯»å–å­—æ®µã€‚

------

```java
String status = root.getStr("status");
```

ğŸ‘‰ è¯»å– JSON ä¸­çš„ `"status"` å­—æ®µï¼Œé€šå¸¸ç”¨äºåˆ¤æ–­æ¥å£æ˜¯å¦æˆåŠŸï¼ˆ"0000"ï¼‰ã€‚

------

```java
root.getStr("statusMsg");
```

ğŸ‘‰ è·å–é”™è¯¯æè¿°ä¿¡æ¯å­—æ®µï¼Œç”¨äºæ—¥å¿—è¾“å‡ºæˆ–æç¤ºã€‚

------

```java
JSONObject dataJson = root.getJSONObject("data");
```

ğŸ‘‰ è¯»å–æ¥å£è¿”å›ç»“æœé‡Œçš„ `"data"` éƒ¨åˆ†å†…å®¹ï¼ˆçœŸæ­£çš„æ•°æ®ä½“ï¼‰ã€‚

------

```java
JSONUtil.toBean(dataJson, PensionAssetOverviewDto.class);
```

ğŸ‘‰ æ ¸å¿ƒï¼š**å°† `dataJson` æ˜ å°„ä¸ºä½ å®šä¹‰çš„ Java ç±» `PensionAssetOverviewDto`**ã€‚å­—æ®µåéœ€è¦åŒ¹é…ï¼ŒåµŒå¥—ç»“æ„ä¹Ÿä¼šè‡ªåŠ¨æ˜ å°„ã€‚



> è¿œç¨‹æ¥å£è°ƒç”¨å â†’ åˆ¤ç©º â†’ è§£æ JSON â†’ çŠ¶æ€åˆ¤æ–­ â†’ æå– data â†’ æ˜ å°„æˆä¸šåŠ¡å¯¹è±¡â€çš„æµç¨‹ã€‚

# 4.è®°å½•httpè¿œç¨‹è°ƒç”¨è€—æ—¶

```
long start = System.currentTimeMillis();
log.info("[PensionServiceImpl-getPensionAssetOverview] è°ƒç”¨è¿œç¨‹å¼€å§‹æ—¶é—´ï¼š{}", start);

String responseJson;
try {
    responseJson = PensionRealPostUtils.getPensionAssetOverview(qry.getCustNo());
} catch (Exception e) {
    log.error("å…»è€é‡‘èµ„äº§æ€»è§ˆè¿œç¨‹è°ƒç”¨å¼‚å¸¸ï¼ŒcustNo={}, å¼‚å¸¸={}", qry.getCustNo(), e.getMessage(), e);
    return null;
}

long end = System.currentTimeMillis();
log.info("[PensionServiceImpl-getPensionAssetOverview] è°ƒç”¨è¿œç¨‹ç»“æŸæ—¶é—´ï¼š{}ï¼Œè€—æ—¶={}ms", end, (end - start));
```