---
icon: pen-to-square
date: 2025-4-18
category:
- åç«¯
tag:
- å®ä¹ 
---
# æ€»ç»“

# 1.å±äºæ­å·é“¶è¡Œçš„æ‰€ä»¥éœ€è¦æŸ¥å‡ºå¯¹åº”çš„è´¦æˆ·ç™»å…¥æ‹¿åˆ°tokenæ‰æœ‰æ•ˆ

![image-20250403141535387](/Users/xiaoxu/Library/Application Support/typora-user-images/image-20250403141535387.png)

# 2.æ‹¿åˆ°urlè½¬æˆbase64

------

### âœ… ä¸€å¥è¯æ€»ç»“ï¼š

> **æ‹¿åˆ°å›¾ç‰‡ URL ä¸ç›´æ¥è¿”å›ï¼Œè€Œæ˜¯è½¬æˆ Base64 è¿”å›ï¼Œæ˜¯ä¸ºäº†è®©å‰ç«¯æ›´æ–¹ä¾¿ã€æ›´å®‰å…¨ã€æ›´ç»Ÿä¸€åœ°å±•ç¤ºå›¾ç‰‡ï¼Œé¿å…è·¨åŸŸã€æƒé™ã€èµ„æºå¤±æ•ˆç­‰é—®é¢˜ã€‚**

------

### âœ… ç®€æ´å¯¹æ¯”è¡¨ï¼š

| æ–¹å¼       | ç›´æ¥è¿”å› URL             | è¿”å› Base64 å­—ç¬¦ä¸²                     |
| ---------- | ------------------------ | -------------------------------------- |
| ğŸ“¦ æ˜“ç”¨æ€§   | å‰ç«¯è¦å†å‘ä¸€æ¬¡è¯·æ±‚       | ç›´æ¥å¯ç”¨ `<img src="data:..." />` æ˜¾ç¤º |
| ğŸ” è·¨åŸŸé—®é¢˜ | å¯èƒ½æœ‰è·¨åŸŸé™åˆ¶ã€é‰´æƒå¤±è´¥ | æ— è·¨åŸŸï¼ŒåµŒåœ¨æ•°æ®é‡Œå°±æ˜¯èµ„æº             |
| ğŸ“‰ èµ„æºå¤±æ•ˆ | é“¾æ¥å¯èƒ½è¿‡æœŸ / æ— æ•ˆ      | Base64 ä¸€æ¬¡æ€§ä¼ è¾“ï¼Œä¸ä¾èµ–æœåŠ¡          |
| ğŸ“ å±•ç¤ºçµæ´» | ä¾èµ–ç½‘ç»œåŠ è½½             | å¯ç¦»çº¿ä½¿ç”¨ï¼ŒåµŒå…¥å¼å±•ç¤º                 |

```java
private String getImageBase64String(InputStream in) throws IOException
```

ğŸ‘‰ æŠŠå›¾ç‰‡çš„è¾“å…¥æµ `InputStream` ä¸­çš„æ‰€æœ‰å­—èŠ‚**è¯»å–å‡ºæ¥**ï¼Œå¹¶ç¼–ç æˆä¸€ä¸ª Base64 å­—ç¬¦ä¸²è¿”å›ã€‚

------

## ğŸ§± æ ¸å¿ƒæ­¥éª¤è§£é‡Šï¼š

| ä»£ç æ®µ                                    | ä½œç”¨è¯´æ˜                        |
| ----------------------------------------- | ------------------------------- |
| `ByteArrayOutputStream buffer`            | ç”¨æ¥æ”¶é›†å›¾ç‰‡çš„æ‰€æœ‰å­—èŠ‚          |
| `in.read(...)` å¾ªç¯                       | æŠŠè¾“å…¥æµçš„æ•°æ®ä¸€æ®µæ®µè¯»è¿› byte[] |
| `buffer.write(...)`                       | æŠŠæ¯æ®µæ•°æ®å†™å…¥åˆ°å†…å­˜ç¼“å†²åŒºä¸­    |
| `buffer.toByteArray()`                    | æŠŠæ•´å¼ å›¾ç‰‡æ•°æ®è½¬ä¸º byte[] æ•°ç»„  |
| `Base64.getEncoder().encodeToString(...)` | æŠŠ byte[] ç¼–ç ä¸º Base64 å­—ç¬¦ä¸²  |

------

## âœ… ä¸€å¥è¯æ€»ç»“ï¼š

> è¿™æ˜¯æŠŠä»»ä½•æ–‡ä»¶æµè½¬ä¸º Base64 çš„æ ‡å‡†å†™æ³•ï¼Œé€‚ç”¨äºå›¾ç‰‡ã€PDFã€Excel ç­‰ä¸€åˆ‡å¯ä»¥è½¬å­—èŠ‚çš„æ–‡ä»¶ã€‚

------

## ğŸ›  å°è£…é€šç”¨å·¥å…·ç±»ï¼š

```java
public class Base64Util {

    public static String toBase64(InputStream in) throws IOException {
        ByteArrayOutputStream buffer = new ByteArrayOutputStream();
        byte[] data = new byte[1024];
        int nRead;
        while ((nRead = in.read(data, 0, data.length)) != -1) {
            buffer.write(data, 0, nRead);
        }
        return Base64.getEncoder().encodeToString(buffer.toByteArray());
    }
}
```

------


