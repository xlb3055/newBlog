---
icon: pen-to-square
date: 2025-12-03
category:
- åç«¯
tag:
- æ•°ç»„
- leecode
---

# 32. æœ€é•¿æœ‰æ•ˆæ‹¬å·

## ğŸ“ é¢˜ç›®æè¿°
ç»™ä½ ä¸€ä¸ªä»…ç”± `'('` å’Œ `')'` ç»„æˆçš„å­—ç¬¦ä¸² `s`ï¼Œæ‰¾å‡ºæœ€é•¿ **æœ‰æ•ˆæ‹¬å·å­ä¸²** çš„é•¿åº¦ã€‚

æœ‰æ•ˆæ‹¬å·æŒ‡ï¼šå·¦å³æ‹¬å·å¿…é¡»ä¸¥æ ¼æˆå¯¹åŒ¹é…ï¼Œå¦‚ï¼š
```

()   (())   ()()

```

---

## ğŸ“Œ ç¤ºä¾‹

### ç¤ºä¾‹ 1
è¾“å…¥ï¼š
```

s = "(()"

```
è¾“å‡ºï¼š
```

2

```
è§£é‡Šï¼šæœ€é•¿æœ‰æ•ˆæ‹¬å·å­ä¸²æ˜¯ `"()"`

### ç¤ºä¾‹ 2
è¾“å…¥ï¼š
```

s = ")()())"

```
è¾“å‡ºï¼š
```

4

```
è§£é‡Šï¼šæœ€é•¿æœ‰æ•ˆæ‹¬å·å­ä¸²æ˜¯ `"()()"`

### ç¤ºä¾‹ 3
è¾“å…¥ï¼š
```

s = ""

```
è¾“å‡ºï¼š
```

0

````

---

# ğŸš€ æœ€ä¼˜è§£ï¼šæ ˆ + æ ‡è®°æ•°ç»„ï¼ˆO(n)ï¼‰

### ğŸ” æ€è·¯è§£æ

æˆ‘ä»¬æƒ³æ‰¾ **å“ªäº›ä½ç½®æ˜¯æœ‰æ•ˆçš„æ‹¬å·**ã€‚

ç­–ç•¥ï¼š

1. éå†å­—ç¬¦ä¸²ï¼Œç”¨æ ˆå­˜å‚¨ `'('` çš„ä¸‹æ ‡ã€‚
2. æ¯å½“é‡åˆ° `')'` ä¸”å¯ä»¥åŒ¹é…ï¼ˆæ ˆéç©ºï¼‰ï¼Œå°±æŠŠè¿™ä¸¤ä¸ªä½ç½®éƒ½æ ‡è®°ä¸º `true`ï¼š
   - `dp[leftIndex] = true`
   - `dp[rightIndex] = true`
3. æœ€ç»ˆæ‰€æœ‰è¿ç»­çš„ `true` æ®µè½ï¼Œå°±æ˜¯æœ‰æ•ˆæ‹¬å·åŒºé—´ã€‚
4. æ‰¾æœ€å¤§è¿ç»­ `true` çš„é•¿åº¦å³å¯ã€‚

---

## âœ… å®Œæ•´ä»£ç ï¼ˆJavaï¼‰

```java
import java.util.Scanner;

public class Main {
    public static void main(String[] args) {
        Scanner scanner = new Scanner(System.in);

        // è¯»å–å­—ç¬¦ä¸²
        String s = scanner.nextLine();

        Solution solution = new Solution();
        int result = solution.longestValidParentheses(s);

        System.out.println(result);

        scanner.close();
    }
}

class Solution {
    public int longestValidParentheses(String s) {
        int n = s.length();
        Stack<Integer> stack = new Stack<>();
        boolean[] dp = new boolean[n];  // dp[i] = true è¡¨ç¤ºè¯¥ä½ç½®åœ¨æœ‰æ•ˆæ‹¬å·ä¸­

        for (int i = 0; i < n; i++) {
            char c = s.charAt(i);
            if (c == '(') {
                stack.push(i);
            } else {
                if (!stack.isEmpty()) {
                    int index = stack.pop();
                    dp[index] = true;
                    dp[i] = true;
                }
            }
        }

        // æ‰¾æœ€é•¿è¿ç»­çš„ true çš„åŒºé—´
        int max = 0, cur = 0;
        for (int i = 0; i < n; i++) {
            if (dp[i]) {
                cur++;
                max = Math.max(max, cur);
            } else {
                cur = 0;
            }
        }

        return max;
    }
}
```

---

# ğŸ§  é€šä¿—æ˜“æ‡‚è§£é‡Š

ä½ å¯ä»¥æŠŠè¿™é¢˜ç†è§£æˆï¼š

> å“ªäº›ä½ç½®æ˜¯åˆæ³•çš„æ‹¬å·ï¼Ÿæ‰¾å‡ºå®ƒä»¬æœ€é•¿è¿ç»­çš„ä¸€æ®µã€‚

ä¾‹å¦‚ï¼š

```
) ( ) ( ) )
0 1 2 3 4 5
```

åŒ¹é…æˆåŠŸçš„ä½ç½®æ ‡è®°ä¸º trueï¼š

```
false true true false true true
```

è¿™äº› true åŒºæ®µè¡¨ç¤ºæœ‰æ•ˆæ‹¬å·ç‰‡æ®µï¼š

* `[1,2]` â†’ "()"
* `[4,5]` â†’ "()"

æœ€é•¿è¿ç»­ true çš„é•¿åº¦å°±æ˜¯ç­”æ¡ˆã€‚

---

# â± æ—¶é—´å¤æ‚åº¦

### **O(n)**

* å•æ¬¡éå†å­—ç¬¦ä¸²ï¼ˆå…¥æ ˆã€å‡ºæ ˆï¼‰
* å†éå†ä¸€æ¬¡ dp æ•°ç»„ç»Ÿè®¡è¿ç»­é•¿åº¦

---

# ğŸ’¾ ç©ºé—´å¤æ‚åº¦

### **O(n)**

* æ ˆæœ€å¤šå­˜å‚¨ n ä¸ªä¸‹æ ‡
* dp æ•°ç»„å ç”¨ n ç©ºé—´

---


