---
icon: pen-to-square
date: 2025-1-04
category:
- åç«¯
tag:
- é“¾è¡¨
- leecode
---

# 148. æ’åºé“¾è¡¨

## ğŸ“ é¢˜ç›®æè¿°
ç»™å®šé“¾è¡¨çš„å¤´èŠ‚ç‚¹ `head`ï¼Œè¦æ±‚å°†å…¶æŒ‰**å‡åº**æ’åˆ—å¹¶è¿”å›æ’åºåçš„é“¾è¡¨ã€‚


## ğŸ“Œ ç¤ºä¾‹
### ç¤ºä¾‹ 1
è¾“å…¥ï¼š`head = [4,2,1,3]`
è¾“å‡ºï¼š`[1,2,3,4]`

### ç¤ºä¾‹ 2
è¾“å…¥ï¼š`head = [-1,5,3,4,0]`
è¾“å‡ºï¼š`[-1,0,3,4,5]`


## ğŸš€ æœ€ä¼˜è§£ï¼šå½’å¹¶æ’åºï¼ˆåˆ†æ²»æ³•ï¼‰
### ğŸ” æ€è·¯è§£æ
æ ¸å¿ƒç­–ç•¥ï¼šåˆ©ç”¨**åˆ†æ²»æ€æƒ³**ï¼Œå°†é“¾è¡¨æ‹†åˆ†ä¸ºå­é“¾è¡¨ï¼Œæ’åºåå†åˆå¹¶ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º \(O(n \log n)\)ï¼ˆé“¾è¡¨æ’åºçš„æœ€ä¼˜æ—¶é—´å¤æ‚åº¦ï¼‰ï¼š
1. **æ‹†åˆ†é“¾è¡¨**ï¼šç”¨**å¿«æ…¢æŒ‡é’ˆ**æ‰¾åˆ°é“¾è¡¨çš„ä¸­ç‚¹ï¼Œå°†é“¾è¡¨æ‹†åˆ†ä¸ºå·¦å³ä¸¤éƒ¨åˆ†ï¼›
2. **é€’å½’æ’åº**ï¼šå¯¹å·¦å³ä¸¤éƒ¨åˆ†å­é“¾è¡¨åˆ†åˆ«é€’å½’æ‰§è¡Œæ’åºï¼›
3. **åˆå¹¶é“¾è¡¨**ï¼šå°†æ’åºåçš„å·¦å³å­é“¾è¡¨åˆå¹¶ä¸ºä¸€ä¸ªå‡åºé“¾è¡¨ã€‚


---

## âœ… å®Œæ•´ä»£ç ï¼ˆJavaï¼‰
```java
import java.util.Scanner;

public class Main {
    private static ListNode buildList(String line) {
        if (line == null) {
            return null;
        }
        line = line.trim();
        if (line.isEmpty()) {
            return null;
        }
        String[] values = line.split(" ");
        ListNode dummy = new ListNode(0);
        ListNode tail = dummy;
        for (String val : values) {
            if (val.isEmpty()) {
                continue;
            }
            tail.next = new ListNode(Integer.parseInt(val));
            tail = tail.next;
        }
        return dummy.next;
    }

    private static void printList(ListNode head) {
        StringBuilder sb = new StringBuilder();
        while (head != null) {
            sb.append(head.val);
            if (head.next != null) {
                sb.append(" ");
            }
            head = head.next;
        }
        System.out.println(sb.toString());
    }

    public static void main(String[] args) {
        Scanner scanner = new Scanner(System.in);
        String line = scanner.hasNextLine() ? scanner.nextLine() : "";
        ListNode head = buildList(line);

        Solution solution = new Solution();
        ListNode result = solution.sortList(head);
        printList(result);
        scanner.close();
    }
}

class Solution {
    public ListNode sortList(ListNode head) {
        // é€’å½’ç»ˆæ­¢æ¡ä»¶ï¼šç©ºé“¾è¡¨æˆ–å•ä¸ªèŠ‚ç‚¹ï¼ˆå·²æœ‰åºï¼‰
        if (head == null || head.next == null) {
            return head;
        }
        // æ‰¾åˆ°é“¾è¡¨ä¸­ç‚¹
        ListNode mid = searchMid(head);
        ListNode rightHead = mid.next;
        mid.next = null; // æ‹†åˆ†å·¦å³é“¾è¡¨
        
        // é€’å½’æ’åºå·¦å³å­é“¾è¡¨
        ListNode left = sortList(head);
        ListNode right = sortList(rightHead);
        
        // åˆå¹¶æ’åºåçš„å­é“¾è¡¨
        return mergeTwoSortedList(left, right);
    }

    // å¿«æ…¢æŒ‡é’ˆæ‰¾é“¾è¡¨ä¸­ç‚¹ï¼ˆå¶æ•°é•¿åº¦æ—¶å–å·¦ä¸­ç‚¹ï¼‰
    private ListNode searchMid(ListNode head) {
        ListNode fast = head.next;
        ListNode slow = head;
        // fastæ¯æ¬¡èµ°2æ­¥ï¼Œslowæ¯æ¬¡èµ°1æ­¥ï¼Œfaståˆ°å°¾æ—¶slowåœ¨ä¸­ç‚¹
        while (fast != null && fast.next != null) {
            fast = fast.next.next;
            slow = slow.next;
        }
        return slow;
    }

    // åˆå¹¶ä¸¤ä¸ªå‡åºé“¾è¡¨
    private ListNode mergeTwoSortedList(ListNode left, ListNode right) {
        ListNode dummy = new ListNode(0); // è™šæ‹Ÿå¤´èŠ‚ç‚¹
        ListNode cur = dummy;
        // åŒæŒ‡é’ˆéå†ï¼Œé€‰æ‹©è¾ƒå°å€¼æ¥å…¥æ–°é“¾è¡¨
        while (left != null && right != null) {
            if (left.val < right.val) {
                cur.next = left;
                left = left.next;
            } else {
                cur.next = right;
                right = right.next;
            }
            cur = cur.next;
        }
        // æ¥å…¥å‰©ä½™èŠ‚ç‚¹
        cur.next = (left != null) ? left : right;
        return dummy.next;
    }
}

class ListNode {
    int val;
    ListNode next;
    ListNode() {}
    ListNode(int val) { this.val = val; }
    ListNode(int val, ListNode next) { this.val = val; this.next = next; }
}
```


---

## ğŸ§  é€šä¿—æ˜“æ‡‚è§£é‡Š
å¯ä»¥æŠŠé“¾è¡¨æƒ³è±¡æˆâ€œä¸€ä¸²æ— åºçš„ç å­â€ï¼Œæ’åºè¿‡ç¨‹ç±»ä¼¼**å…ˆæ‹†æˆå°ä¸²ã€å„è‡ªæ’å¥½åºï¼Œå†ä¸²æˆä¸€ä¸²æœ‰åºçš„**ï¼š
1. **æ‹†åˆ†**ï¼šç”¨å¿«æ…¢æŒ‡é’ˆæŠŠç å­ä¸²æ‹†æˆå·¦å³ä¸¤å°ä¸²ï¼›
2. **å­ä¸²æ’åº**ï¼šå¯¹æ¯å°ä¸²é‡å¤æ‹†åˆ†ã€æ’åºçš„æ“ä½œï¼Œç›´åˆ°æ¯å°ä¸²åªæœ‰1é¢—ç å­ï¼ˆå¤©ç„¶æœ‰åºï¼‰ï¼›
3. **åˆå¹¶**ï¼šæŠŠæ’å¥½åºçš„å°ä¸²ä¸¤ä¸¤åˆå¹¶ï¼Œæœ€ç»ˆå¾—åˆ°å®Œæ•´çš„æœ‰åºä¸²ã€‚

ä»¥ç¤ºä¾‹1ï¼ˆ`head = [4,2,1,3]`ï¼‰ä¸ºä¾‹ï¼š
1. æ‹†åˆ†ä¸­ç‚¹ä¸º `2`ï¼Œé“¾è¡¨æ‹†åˆ†ä¸º `[4,2]` å’Œ `[1,3]`ï¼›
2. é€’å½’æ‹†åˆ† `[4,2]` ä¸º `[4]` å’Œ `[2]`ï¼Œæ’åºååˆå¹¶ä¸º `[2,4]`ï¼›
   é€’å½’æ‹†åˆ† `[1,3]` ä¸º `[1]` å’Œ `[3]`ï¼Œæ’åºååˆå¹¶ä¸º `[1,3]`ï¼›
3. åˆå¹¶ `[2,4]` å’Œ `[1,3]`ï¼Œå¾—åˆ°æœ€ç»ˆæœ‰åºé“¾è¡¨ `[1,2,3,4]`ã€‚


---

## â± æ—¶é—´å¤æ‚åº¦
- \(O(n \log n)\)ï¼ˆ`n` ä¸ºé“¾è¡¨é•¿åº¦ï¼‰
  æ‹†åˆ†é“¾è¡¨çš„æ—¶é—´ä¸º \(O(\log n)\) å±‚ï¼Œæ¯å±‚åˆå¹¶çš„æ—¶é—´ä¸º \(O(n)\)ï¼Œæ•´ä½“å¤æ‚åº¦ä¸º \(O(n \log n)\)ã€‚


---

## ğŸ’¾ ç©ºé—´å¤æ‚åº¦
- \(O(\log n)\)
  é€’å½’è°ƒç”¨æ ˆçš„æ·±åº¦ä¸ºæ‹†åˆ†çš„å±‚æ•° \(O(\log n)\)ï¼Œé¢å¤–ç©ºé—´ä¸»è¦ç”¨äºé€’å½’æ ˆã€‚
