---
icon: pen-to-square
date: 2025-12-16
category:
- åç«¯
tag:
- äºŒåˆ†æŸ¥æ‰¾
- æ•°ç»„
- leetcode
---

# 4. å¯»æ‰¾ä¸¤ä¸ªæ­£åºæ•°ç»„çš„ä¸­ä½æ•°

## ğŸ“ é¢˜ç›®æè¿°
ç»™å®šä¸¤ä¸ªå¤§å°åˆ†åˆ«ä¸º `m` å’Œ `n` çš„æ­£åºï¼ˆä»å°åˆ°å¤§ï¼‰æ•°ç»„ `nums1` å’Œ `nums2`ï¼Œè¯·æ‰¾å‡ºå¹¶è¿”å›è¿™ä¸¤ä¸ªæ­£åºæ•°ç»„çš„ **ä¸­ä½æ•°**ã€‚è¦æ±‚ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸º **O(log(m+n))**ã€‚


---

## ğŸ“Œ ç¤ºä¾‹

### ç¤ºä¾‹ 1
è¾“å…¥ï¼š
```
nums1 = [1,3], nums2 = [2]
```
è¾“å‡ºï¼š
```
2.00000
```
è§£é‡Šï¼šåˆå¹¶æ•°ç»„ = [1,2,3]ï¼Œä¸­ä½æ•°æ˜¯ 2ã€‚


### ç¤ºä¾‹ 2
è¾“å…¥ï¼š
```
nums1 = [1,2], nums2 = [3,4]
```
è¾“å‡ºï¼š
```
2.50000
```
è§£é‡Šï¼šåˆå¹¶æ•°ç»„ = [1,2,3,4]ï¼Œä¸­ä½æ•°æ˜¯ (2 + 3)/2 = 2.5ã€‚


---

# ğŸš€ æœ€ä¼˜è§£ï¼šäºŒåˆ†æŸ¥æ‰¾ï¼ˆåˆ’åˆ†æ•°ç»„æ³•ï¼‰

### ğŸ” æ€è·¯è§£æ
æ ¸å¿ƒç­–ç•¥ï¼š**å°†ä¸¤ä¸ªæ•°ç»„åˆ’åˆ†ä¸ºâ€œå·¦åŠéƒ¨åˆ†æ€»é•¿åº¦ â‰¥ å³åŠéƒ¨åˆ†æ€»é•¿åº¦â€çš„ä¸¤éƒ¨åˆ†ï¼Œä¿è¯å·¦åŠéƒ¨åˆ†çš„æœ€å¤§å€¼ â‰¤ å³åŠéƒ¨åˆ†çš„æœ€å°å€¼ï¼Œæ­¤æ—¶ä¸­ä½æ•°å¯é€šè¿‡å·¦å³è¾¹ç•Œå€¼è®¡ç®—**ã€‚
1. å…ˆä¿è¯ `nums1` æ˜¯è¾ƒçŸ­æ•°ç»„ï¼ˆå‡å°‘äºŒåˆ†æ¬¡æ•°ï¼‰ï¼Œè‹¥ `nums1` æ›´é•¿åˆ™äº¤æ¢ä¸¤ä¸ªæ•°ç»„ï¼›
2. å®šä¹‰äºŒåˆ†æŸ¥æ‰¾çš„èŒƒå›´ `[l, r]`ï¼ˆ`l=0`ï¼Œ`r=len(nums1)`ï¼‰ï¼Œè¡¨ç¤º `nums1` ä¸­åˆ’åˆ†åˆ°å·¦åŠéƒ¨åˆ†çš„å…ƒç´ ä¸ªæ•°ï¼›
3. æ¯æ¬¡äºŒåˆ†å– `i = (l + r) // 2`ï¼ˆ`nums1` å·¦åŠéƒ¨åˆ†å…ƒç´ æ•°ï¼‰ï¼Œåˆ™ `j = (m + n + 1) // 2 - i`ï¼ˆ`nums2` å·¦åŠéƒ¨åˆ†å…ƒç´ æ•°ï¼Œä¿è¯å·¦åŠéƒ¨åˆ†æ€»é•¿åº¦ â‰¥ å³åŠéƒ¨åˆ†ï¼‰ï¼›
4. æ¯”è¾ƒè¾¹ç•Œå€¼ï¼Œè°ƒæ•´äºŒåˆ†èŒƒå›´ï¼š
    - è‹¥ `nums1[i-1] > nums2[j]`ï¼š`nums1` å·¦åŠéƒ¨åˆ†å¤ªå¤§ï¼Œ`r = i - 1`ï¼›
    - è‹¥ `nums2[j-1] > nums1[i]`ï¼š`nums1` å·¦åŠéƒ¨åˆ†å¤ªå°ï¼Œ`l = i + 1`ï¼›
5. æ‰¾åˆ°åˆæ³•åˆ’åˆ†åï¼Œè®¡ç®—å·¦åŠéƒ¨åˆ†æœ€å¤§å€¼ `max_left` å’Œå³åŠéƒ¨åˆ†æœ€å°å€¼ `min_right`ï¼Œæ ¹æ®æ€»é•¿åº¦å¥‡å¶æ€§è¿”å›ä¸­ä½æ•°ã€‚


---

## âœ… å®Œæ•´ä»£ç ï¼ˆJavaï¼‰
```java
import java.util.Scanner;

public class Main {
    public static void main(String[] args) {
        Scanner scanner = new Scanner(System.in);

        // è¯»å–ç¬¬ä¸€ä¸ªæ•°ç»„
        int m = scanner.nextInt();
        int[] nums1 = new int[m];
        for (int i = 0; i < m; i++) {
            nums1[i] = scanner.nextInt();
        }

        // è¯»å–ç¬¬äºŒä¸ªæ•°ç»„
        int n = scanner.nextInt();
        int[] nums2 = new int[n];
        for (int i = 0; i < n; i++) {
            nums2[i] = scanner.nextInt();
        }

        // åˆ›å»ºè§£å†³æ–¹æ¡ˆå¯¹è±¡å¹¶è®¡ç®—ç»“æœ
        Solution solution = new Solution();
        double result = solution.findMedianSortedArrays(nums1, nums2);

        // è¾“å‡ºç»“æœï¼Œä¿ç•™6ä½å°æ•°
        System.out.printf("%.6f", result);

        scanner.close();
    }
}

class Solution {
    public double findMedianSortedArrays(int[] nums1, int[] nums2) {
        int m = nums1.length;
        int n = nums2.length;
        // ä¿è¯nums1æ˜¯è¾ƒçŸ­æ•°ç»„ï¼Œå‡å°‘äºŒåˆ†æ¬¡æ•°
        if (m > n) {
            return findMedianSortedArrays(nums2, nums1);
        }

        int l = 0, r = m;
        // å·¦åŠéƒ¨åˆ†æ€»é•¿åº¦ï¼ˆâ‰¥å³åŠéƒ¨åˆ†ï¼‰
        int leftTotal = (m + n + 1) / 2;

        while (l <= r) {
            // nums1å·¦åŠéƒ¨åˆ†å…ƒç´ æ•°
            int i = (l + r) / 2;
            // nums2å·¦åŠéƒ¨åˆ†å…ƒç´ æ•°
            int j = leftTotal - i;

            // è°ƒæ•´äºŒåˆ†èŒƒå›´ï¼šnums1å·¦åŠéƒ¨åˆ†å¤ªå¤§
            if (i > 0 && j < n && nums1[i-1] > nums2[j]) {
                r = i - 1;
            }
            // è°ƒæ•´äºŒåˆ†èŒƒå›´ï¼šnums1å·¦åŠéƒ¨åˆ†å¤ªå°
            else if (j > 0 && i < m && nums2[j-1] > nums1[i]) {
                l = i + 1;
            }
            // æ‰¾åˆ°åˆæ³•åˆ’åˆ†
            else {
                // è®¡ç®—å·¦åŠéƒ¨åˆ†æœ€å¤§å€¼
                int maxLeft;
                if (i == 0) {
                    maxLeft = j > 0 ? nums2[j-1] : Integer.MIN_VALUE;
                } else if (j == 0) {
                    maxLeft = nums1[i-1];
                } else {
                    maxLeft = Math.max(nums1[i-1], nums2[j-1]);
                }
                // æ€»é•¿åº¦ä¸ºå¥‡æ•°ï¼Œç›´æ¥è¿”å›å·¦åŠéƒ¨åˆ†æœ€å¤§å€¼
                if ((m + n) % 2 == 1) {
                    return maxLeft;
                }

                // è®¡ç®—å³åŠéƒ¨åˆ†æœ€å°å€¼
                int minRight;
                if (i == m) {
                    minRight = j < n ? nums2[j] : Integer.MAX_VALUE;
                } else if (j == n) {
                    minRight = nums1[i];
                } else {
                    minRight = Math.min(nums1[i], nums2[j]);
                }
                // æ€»é•¿åº¦ä¸ºå¶æ•°ï¼Œè¿”å›å¹³å‡å€¼
                return (maxLeft + minRight) / 2.0;
            }
        }
        // é¢˜ç›®ä¿è¯æ•°ç»„éç©ºï¼Œä¸ä¼šèµ°åˆ°è¿™ä¸€æ­¥
        return 0.0;
    }
}
```


---

# ğŸ§  é€šä¿—æ˜“æ‡‚è§£é‡Š
å¯ä»¥æŠŠé—®é¢˜ç†è§£ä¸ºâ€œåˆ‡è›‹ç³•åˆ†ä¸¤åŠï¼Œå·¦è¾¹ä¸è¶…è¿‡å³è¾¹â€ï¼š
- æŠŠä¸¤ä¸ªæ•°ç»„æƒ³è±¡æˆä¸¤å—è›‹ç³•ï¼Œæˆ‘ä»¬è¦åˆ‡ä¸¤åˆ€ï¼ˆåˆ†åˆ«åˆ‡åœ¨ `nums1` å’Œ `nums2` ä¸Šï¼‰ï¼ŒæŠŠæ‰€æœ‰è›‹ç³•åˆ†æˆå·¦å³ä¸¤å †ï¼›
- è¦æ±‚ï¼šå·¦å †æ€»é•¿åº¦ â‰¥ å³å †ï¼Œä¸”å·¦å †é‡Œæœ€å¤§çš„é‚£å— â‰¤ å³å †é‡Œæœ€å°çš„é‚£å—ï¼›
- æ‰¾åˆ°è¿™æ ·çš„åˆ‡æ³•åï¼Œè‹¥æ€»é•¿åº¦æ˜¯å¥‡æ•°ï¼Œå·¦å †æœ€å¤§çš„å°±æ˜¯ä¸­ä½æ•°ï¼›è‹¥å¶æ•°ï¼Œå·¦å †æœ€å¤§å’Œå³å †æœ€å°çš„å¹³å‡å€¼å°±æ˜¯ä¸­ä½æ•°ã€‚

ä»¥ç¤ºä¾‹1 `nums1=[1,3], nums2=[2]` ä¸ºä¾‹ï¼š
1. ä¿è¯ `nums1` è¾ƒçŸ­ï¼ˆm=2 â‰¤ n=1ï¼Ÿä¸ï¼Œäº¤æ¢å `nums1=[2], nums2=[1,3]`ï¼‰ï¼›
2. äºŒåˆ†æŸ¥æ‰¾ `nums1` çš„åˆ’åˆ†ï¼š`i=0` æ—¶ï¼Œ`j=(1+2+1)/2 - 0=2`ï¼›
3. æ£€æŸ¥è¾¹ç•Œï¼š`nums1` å·¦åŠéƒ¨åˆ†ä¸ºç©ºï¼Œ`nums2` å·¦åŠéƒ¨åˆ†æ˜¯ `[1,3]`ï¼Œå·¦å †æœ€å¤§å€¼æ˜¯3ï¼Œä½†å³å †åªæœ‰ `nums1[0]=2`ï¼Œä¸åˆæ³•ï¼›
4. è°ƒæ•´ä¸º `i=1`ï¼Œ`j=2-1=1`ï¼›
5. å·¦å †æ˜¯ `nums1[0]=2` å’Œ `nums2[0]=1`ï¼Œæœ€å¤§å€¼æ˜¯2ï¼›å³å †æ˜¯ `nums2[1]=3`ï¼Œæœ€å°å€¼æ˜¯3ï¼›æ»¡è¶³â€œå·¦â‰¤å³â€ï¼›
6. æ€»é•¿åº¦3æ˜¯å¥‡æ•°ï¼Œä¸­ä½æ•°å°±æ˜¯å·¦å †æœ€å¤§å€¼2ã€‚


---

# â± æ—¶é—´å¤æ‚åº¦
### **O(log(min(m,n)))**
ä»…å¯¹è¾ƒçŸ­æ•°ç»„è¿›è¡ŒäºŒåˆ†æŸ¥æ‰¾ï¼Œæ¯æ¬¡ç¼©å°ä¸€åŠèŒƒå›´ï¼Œæ•ˆç‡æœ€ä¼˜ã€‚


---

# ğŸ’¾ ç©ºé—´å¤æ‚åº¦
### **O(1)**
ä»…ä½¿ç”¨å‡ ä¸ªå˜é‡å­˜å‚¨è¾¹ç•Œå€¼å’ŒäºŒåˆ†èŒƒå›´ï¼Œæ— é¢å¤–ç©ºé—´æ¶ˆè€—ã€‚

æƒ³è±¡æŠ½ç»³å­ï¼Œæ‰¾åˆ°num_i1 <= num_j2 && num_j1 <= num_i2